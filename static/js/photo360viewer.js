!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Component=e():(t.eg=t.eg||{},t.eg.Component=e())}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.Component=function(){function t(){n(this,t),this._eventHandler={},this.options={}}return r(t,[{key:"option",value:function(){if(arguments.length>=2){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1];return this.options[t]=e,this}var i=arguments.length<=0?void 0:arguments[0];if("string"==typeof i)return this.options[i];if(0===arguments.length)return this.options;var n=i;return this.options=n,this}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._eventHandler[t]||[],n=i.length>0;if(!n)return!0;i=i.concat(),e.eventType=t;var o=!1,r=[e],s=void 0;e.stop=function(){return o=!0};for(var a=arguments.length,h=Array(a>2?a-2:0),c=2;c<a;c++)h[c-2]=arguments[c];h.length>=1&&(r=r.concat(h));for(s in i)i[s].apply(this,r);return!o}},{key:"once",value:function(t,e){if("object"===("undefined"==typeof t?"undefined":o(t))&&"undefined"==typeof e){var i=t,n=void 0;for(n in i)this.once(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this;this.on(t,function i(){for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];e.apply(r,o),r.off(t,i)})}return this}},{key:"hasOn",value:function(t){return!!this._eventHandler[t]}},{key:"on",value:function(t,e){if("object"===("undefined"==typeof t?"undefined":o(t))&&"undefined"==typeof e){var i=t,n=void 0;for(n in i)this.on(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this._eventHandler[t];"undefined"==typeof r&&(r=this._eventHandler[t]=[]),r.push(e)}return this}},{key:"off",value:function(t,e){if("undefined"==typeof t)return this._eventHandler={},this;if("undefined"==typeof e){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var i=t,n=void 0;for(n in i)this.off(n,i[n]);return this}var o=this._eventHandler[t];if(o){var r=void 0,s=void 0;for(r=0,s;s=o[r];r++)if(s===e){o=o.splice(r,1);break}}return this}}]),t}()},function(t,e,i){"use strict";var n=i(0);t.exports=n.Component}])}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.agent=e():(t.eg=t.eg||{},t.eg.agent=e())}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";function n(t,e){return e&&e.test?!!e.test(t):t.indexOf(e)>-1}function o(t,e){var i=t.filter(function(t){return n(y,t.criteria)})[0];return i&&i.identity||e.name}function r(t){return o(t,g.defaultString.browser)}function s(t,e){return t.filter(function(t){var i=t.criteria,o=new v.RegExp(t.identity,"i").test(e);return!!(i?o&&n(y,i):o)})[0]}function a(t){return s(g.browser,t)}function h(t,e){var i=g.defaultString.browser.version,n=new v.RegExp("("+t+")","i").exec(e);if(!n)return i;var o=n.index,r=n[0];if(o>-1){var s=o+r.length+1;i=e.substring(s).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")}return i}function c(t){if(t){var e=a(t).versionSearch||t,i=h(e,y);return i}}function u(t){return o(t,g.defaultString.os)}function l(t){return s(g.os,t)}function p(t){var e=l(t)||{},i=g.defaultString.os.version,n=void 0;if(t){if(e.versionAlias)return e.versionAlias;var o=e.versionSearch||t,r=new v.RegExp("("+o+")\\s([\\d_\\.]+|\\d_0)","i"),s=r.exec(y);return s&&(n=r.exec(y)[2].replace(/_/g,".").replace(/;|\)/g,"")),n||i}}function f(){var t=g.webview,e=void 0;return t.filter(function(t){return n(y,t.criteria)}).some(function(t){return e=h(t.browserVersionSearch,y),!(!n(y,t.webviewToken)&&!n(e,t.webviewBrowserVersion))})}function d(t){return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),"ios"===t.os.name&&t.browser.webview&&(t.browser.version="-1"),t}function m(t){y=t?t:v.navigator.userAgent;var e={os:{},browser:{}};return e.browser.name=r(g.browser),e.browser.version=c(e.browser.name),e.os.name=u(g.os),e.os.version=p(e.os.name),e.browser.webview=f(),e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),d(e)}Object.defineProperty(e,"__esModule",{value:!0});var v=i(1),g={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/SAMSUNG|SamsungBrowser/,identity:"SBrowser",versionSearch:"Chrome"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"default"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone|Windows NT/,identity:"Window",versionSearch:"Windows Phone|Windows NT"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"default"},os:{version:"-1",name:"unknown"}}},y=void 0;m.VERSION="2.0.0-beta",e.default=m,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!=typeof window&&window||{};e.RegExp=n.RegExp,e.navigator=n.navigator},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(0),r=n(o);t.exports=r.default}])}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("MovableCoord",[],e):"object"==typeof exports?exports.MovableCoord=e():(t.eg=t.eg||{},t.eg.MovableCoord=e())}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,i){"use strict";e.__esModule=!0,e.SUPPORT_TOUCH=e.UNIQUEKEY=e.DIRECTION=void 0;var n=i(1),o={DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24};o.DIRECTION_ALL=o.DIRECTION_HORIZONTAL|o.DIRECTION_VERTICAL,e.DIRECTION=o,e.UNIQUEKEY="__MOVABLECOORD__",e.SUPPORT_TOUCH="ontouchstart"in n.window},function(t,e,i){"use strict";e.__esModule=!0;var n="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")();e.window=n,e.document=n.document},function(t,e,i){"use strict";e.__esModule=!0;var n=i(0),o={getDirectionByAngle:function(t,e){if(e<0||e>90)return n.DIRECTION.DIRECTION_NONE;var i=Math.abs(t);return i>e&&i<180-e?n.DIRECTION.DIRECTION_VERTICAL:n.DIRECTION.DIRECTION_HORIZONTAL},isHorizontal:function(t,e){return t===n.DIRECTION.DIRECTION_ALL||t&n.DIRECTION.DIRECTION_HORIZONTAL&&e&n.DIRECTION.DIRECTION_HORIZONTAL},isVertical:function(t,e){return t===n.DIRECTION.DIRECTION_ALL||t&n.DIRECTION.DIRECTION_VERTICAL&&e&n.DIRECTION.DIRECTION_VERTICAL},getPointOfIntersection:function(t,e,i,n,o,r){var s=[i[0]-r[3],i[1]-r[0]],a=[n[0]+r[1],n[1]+r[2]],h=e.concat(),c=e[0]-t[0],u=e[1]-t[1];return o[3]||(h[0]=Math.max(s[0],h[0])),o[1]||(h[0]=Math.min(a[0],h[0])),h[1]=c?t[1]+u/c*(h[0]-t[0]):h[1],o[0]||(h[1]=Math.max(s[1],h[1])),o[2]||(h[1]=Math.min(a[1],h[1])),h[0]=u?t[0]+c/u*(h[1]-t[1]):h[0],[Math.min(n[0],Math.max(i[0],h[0])),Math.min(n[1],Math.max(i[1],h[1]))]},isOutside:function(t,e,i){return t[0]<e[0]||t[1]<e[1]||t[0]>i[0]||t[1]>i[1]},isOutToOut:function(t,e,i,n){return(t[0]<i[0]||t[0]>n[0]||t[1]<i[1]||t[1]>n[1])&&(e[0]<i[0]||e[0]>n[0]||e[1]<i[1]||e[1]>n[1])},getNextOffsetPos:function(t,e){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n=Math.abs(i/-e);return[t[0]/2*n,t[1]/2*n]},getDurationFromPos:function(t,e){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n=Math.sqrt(i/e*2);return n<100?0:n},isCircular:function(t,e,i,n){return n[0]&&t[1]<e[1]||n[1]&&t[0]>i[0]||n[2]&&t[1]>i[1]||n[3]&&t[0]<e[0]},getCircularPos:function(t,e,i,n){var o=t.concat(),r=[i[0]-e[0],i[1]-e[1]];return n[0]&&o[1]<e[1]&&(o[1]=(o[1]-e[1])%r[1]+i[1]),n[1]&&o[0]>i[0]&&(o[0]=(o[0]-i[0])%r[0]+e[0]),n[2]&&o[1]>i[1]&&(o[1]=(o[1]-i[1])%r[1]+e[1]),n[3]&&o[0]<e[0]&&(o[0]=(o[0]-e[0])%r[0]+i[0]),o[0]=+o[0].toFixed(5),o[1]=+o[1].toFixed(5),o}};e.default=o,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0;if("string"==typeof t){if(t.match(/^<([a-z]+)\s*([^>]*)>/)){var n=r.document.createElement("div");n.innerHTML=t,i=Array.prototype.slice.call(n.childNodes)}else i=Array.prototype.slice.call(r.document.querySelectorAll(t));e||(i=i.length>=1?i[0]:void 0)}else t.nodeName&&1===t.nodeType?i=t:r.window.jQuery&&t instanceof jQuery&&(i=e?t.toArray():t.get(0));return i}e.__esModule=!0,e.$=e.Mixin=void 0;var r=i(1),s=function(){function t(e){n(this,t),this.superclass=e||function(){function t(){n(this,t)}return t}()}return t.prototype.with=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(function(t,e){return e(t)},this.superclass)},t}(),a=function(t){return new s(t)};e.Mixin=a,e.$=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},c=i(9),u=n(c),l=i(5),p=n(l),f=i(7),d=n(f),m=i(6),v=n(m),g=i(0),y=i(3),_=function(t){function e(i){o(this,e);var n=r(this,t.call(this));return h(n.options={min:[0,0],max:[100,100],bounce:[10,10,10,10],margin:[0,0,0,0],circular:[!1,!1,!1,!1],easing:function(t){return 1-Math.pow(1-t,3)},maximumDuration:1/0,deceleration:6e-4},i),n._reviseOptions(),n._hammerManager=new p.default,n._pos=n.options.min.concat(),n}return s(e,t),e.prototype.bind=function(t,e){return this._hammerManager.add(t,e,this),this},e.prototype.unbind=function(t){return this._hammerManager.remove(t),this},e.prototype.getHammer=function(t){return this._hammerManager.getHammer(t)},e.prototype.enableInput=function(t){return this._hammerManager.inputControl(!0,t)},e.prototype.disableInput=function(t){return this._hammerManager.inputControl(!1,t)},e.prototype._reviseOptions=function(){var t=this,e=void 0;["bounce","margin","circular"].forEach(function(i){null!=(e=t.options[i])&&(e.constructor===Array?t.options[i]=2===e.length?e.concat(e):e.concat():/string|number|boolean/.test(void 0===e?"undefined":a(e))?t.options[i]=[e,e,e,e]:t.options[i]=null)})},e.prototype.get=function(){return this._pos.concat()},e.prototype.destroy=function(){this.off(),this._hammerManager.destroy()},e}((0,y.Mixin)(u.default).with(d.default,v.default));h(_,g.DIRECTION),e.default=_,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=i(10),s=function(t){return t&&t.__esModule?t:{default:t}}(r),a=i(3),h=i(0);if(void 0===s.default)throw new Error("The Hammerjs must be loaded before eg.MovableCoord.\nhttp://hammerjs.github.io/");var c=function(){function t(){n(this,t),this._hammers={}}return t.createHammer=function(e,i,n,o){try{return t.attachHammerEvents(new s.default.Manager(e,{recognizers:[[s.default.Pan,{direction:i.direction,threshold:0}]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",userDrag:"none"},inputClass:n}),i,o)}catch(t){return null}},t.attachHammerEvents=function(t,e,i){var n=t.get("pan").options.enable;return t.on("hammer.input",function(o){o.isFirst?(i._setCurrentTarget(t,e),n&&i._start(o)):o.isFinal&&n&&i._end(o)}).on("panstart panmove",function(t){return i._move(t)})},t.detachHammerEvents=function(t){t.off("hammer.input panstart panmove panend")},t.convertInputType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!1,i=!1;return(t||[]).forEach(function(t){switch(t){case"mouse":i=!0;break;case"touch":e=h.SUPPORT_TOUCH}}),e&&s.default.TouchInput||i&&s.default.MouseInput||null},t.prototype.add=function(e,i,n){var r=(0,a.$)(e),s=r.getAttribute(h.UNIQUEKEY),c=o({direction:h.DIRECTION.DIRECTION_ALL,scale:[1,1],thresholdAngle:45,interruptable:!0,inputType:["touch","mouse"]},i),u=t.convertInputType(c.inputType);u&&(s?this._hammers[s].hammer.destroy():s=Math.round(Math.random()*(new Date).getTime()),this._hammers[s]={hammer:t.createHammer(r,c,u,n),el:r,options:c},r.setAttribute(h.UNIQUEKEY,s))},t.prototype.remove=function(e){var i=(0,a.$)(e),n=i.getAttribute(h.UNIQUEKEY);if(n){var o=this._hammers[n].hammer;t.detachHammerEvents(o),o.destroy(),delete this._hammers[n],i.removeAttribute(h.UNIQUEKEY)}},t.prototype.getHammer=function(t){var e=this.get(t);return e?e.hammer:null},t.prototype.get=function(t){var e=(0,a.$)(t),i=e?e.getAttribute(h.UNIQUEKEY):null;return i&&this._hammers[i]?this._hammers[i]:null},t.prototype.inputControl=function(t,e){var i={enable:t};if(e){var n=this.getHammer(e);n&&n.get("pan").set(i)}else for(var o in this._hammers)this._hammers[o].hammer.get("pan").set(i);return this},t.prototype.destroy=function(){for(var t in this._hammers)this.remove(this._hammers[t].el);this._hammers={}},t}();e.default=c,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=i(2),h=function(t){return t&&t.__esModule?t:{default:t}}(a),c=i(1);e.default=function(t){return function(t){function e(){n(this,e);var i=o(this,t.call(this));return i._raf=null,i._animateParam=null,i._animationEnd=i._animationEnd.bind(i),i._restore=i._restore.bind(i),i}return r(e,t),e.prototype._grab=function(t,e,i){if(this._animateParam){this.trigger("animationEnd");var n=this.get(),o=h.default.getCircularPos(this.get(),t,e,i);o[0]===n[0]&&o[1]===n[1]||this._setPosAndTriggerChange(o,!0),this._animateParam=null,this._raf&&c.window.cancelAnimationFrame(this._raf),this._raf=null}},e.prototype._prepareParam=function(t,e,i){var n=this.get(),o=this.options.min,r=this.options.max,s=this.options.circular,a=this.options.maximumDuration,c=h.default.getPointOfIntersection(n,t,o,r,s,this.options.bounce);c=h.default.isOutToOut(n,c,o,r)?n:c;var u=[Math.abs(c[0]-n[0]),Math.abs(c[1]-n[1])],l=null==e?h.default.getDurationFromPos(u,this.options.deceleration):e;return l=a>l?l:a,{depaPos:n.concat(),destPos:c.concat(),isBounce:h.default.isOutside(c,o,r),isCircular:h.default.isCircular(t,o,r,s),duration:l,distance:u,hammerEvent:i||null,done:this._animationEnd}},e.prototype._restore=function(t,e){var i=this.get(),n=this.options.min,o=this.options.max;this._animate(this._prepareParam([Math.min(o[0],Math.max(n[0],i[0])),Math.min(o[1],Math.max(n[1],i[1]))],null,e),t)},e.prototype._animationEnd=function(){this._animateParam=null;var t=this.get(),e=h.default.getCircularPos([Math.round(t[0]),Math.round(t[1])],this.options.min,this.options.max,this.options.circular);this.setTo.apply(this,e),this._setInterrupt(!1),this.trigger("animationEnd")},e.prototype._animate=function(t,e){if(this._animateParam=s({},t),this._animateParam.startTime=(new Date).getTime(),t.duration){var i=this._animateParam,n=this;!function t(){return n._raf=null,n._frame(i)>=1?void e():void(n._raf=c.window.requestAnimationFrame(t))}()}else this._setPosAndTriggerChange(t.destPos,!1),e()},e.prototype._animateTo=function(t,e,i){var n=this,o=this._prepareParam(t,e,i),r=this.trigger("animationStart",o);if(o.isCircular&&!r)throw new Error("You can't stop the 'animation' event when 'circular' is true.");if(r){var s=[],a=function(){var t=s.shift();t&&t.call(this)};o.depaPos[0]===o.destPos[0]&&o.depaPos[1]===o.destPos[1]||s.push(function(){return n._animate(o,a)}),h.default.isOutside(o.destPos,this.options.min,this.options.max)&&s.push(function(){return n._restore(a,i)}),s.push(function(){return n._animationEnd()}),a()}},e.prototype._frame=function(t){for(var e=new Date-t.startTime,i=this._easing(e/t.duration),n=[t.depaPos[0],t.depaPos[1]],o=0;o<2;o++)n[o]!==t.destPos[o]&&(n[o]+=(t.destPos[o]-n[o])*i);return n=h.default.getCircularPos(n,this.options.min,this.options.max,this.options.circular),this._setPosAndTriggerChange(n,!1),i},e.prototype._setPosAndTriggerChange=function(t,e,i){this._pos=t.concat(),this.trigger("change",{pos:t.concat(),holding:e,hammerEvent:i||null})},e.prototype._easing=function(t){return t>1?1:this.options.easing(t)},e.prototype.setTo=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t,o=e,r=this.options.min,s=this.options.max,a=this.options.circular;this._grab(r,s,a);var c=this.get();return t===c[0]&&e===c[1]?this:(this._setInterrupt(!0),t!==c[0]&&(a[3]||(n=Math.max(r[0],n)),a[1]||(n=Math.min(s[0],n))),e!==c[1]&&(a[0]||(o=Math.max(r[1],o)),a[2]||(o=Math.min(s[1],o))),i?this._animateTo([n,o],i):(this._pos=h.default.getCircularPos([n,o],r,s,a),this._setPosAndTriggerChange(this._pos,!1),this._setInterrupt(!1)),this)},e.prototype.setBy=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setTo(null!=t?this._pos[0]+t:this._pos[0],null!=e?this._pos[1]+e:this._pos[1],i)},e}(t)},t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(2),a=function(t){return t&&t.__esModule?t:{default:t}}(s),h=i(0);e.default=function(t){return function(t){function e(){n(this,e);var i=o(this,t.call(this));return i._status={grabOutside:!1,currentHammer:null,currentOptions:{},moveDistance:null,prevented:!1},i}return r(e,t),e.prototype._setCurrentTarget=function(t,e){this._status.currentOptions=e,this._status.currentHanmmer=t},e.prototype._start=function(t){if(this._status.currentOptions.interruptable||!this._status.prevented){var e=this.get(),i=this.options.min,n=this.options.max;this._setInterrupt(!0),this._grab(i,n,this.options.circular),this.trigger("hold",{pos:e.concat(),hammerEvent:t}),this._status.moveDistance=e.concat(),this._status.grabOutside=a.default.isOutside(e,i,n)}},e.prototype._move=function(t){if(this._isInterrupting()&&this._status.moveDistance){var e=this.get(!0),i=this.options.min,n=this.options.max,o=this.options.bounce,r=this.options.margin,s=this._status.currentOptions,h=s.direction,c=s.scale,u=a.default.getDirectionByAngle(t.angle,s.thresholdAngle),l=[r[0]+o[0],r[1]+o[1],r[2]+o[2],r[3]+o[3]],p=!1,f=this._status.currentHanmmer.session.prevInput;f?(t.offsetX=t.deltaX-f.deltaX,t.offsetY=t.deltaY-f.deltaY):(t.offsetX=0,t.offsetY=0),a.default.isHorizontal(h,u)&&(this._status.moveDistance[0]+=t.offsetX*c[0],p=!0),a.default.isVertical(h,u)&&(this._status.moveDistance[1]+=t.offsetY*c[1],p=!0),p&&(t.srcEvent.preventDefault(),t.srcEvent.stopPropagation()),t.preventSystemEvent=p,e[0]=this._status.moveDistance[0],e[1]=this._status.moveDistance[1],e=a.default.getCircularPos(e,i,n,this.options.circular),this._status.grabOutside&&!a.default.isOutside(e,i,n)&&(this._status.grabOutside=!1);var d=void 0,m=void 0,v=void 0;if(this._status.grabOutside)m=i[0]-l[3],v=n[0]+l[1],d=e[0],e[0]=d>v?v:d<m?m:d,m=i[1]-l[0],v=n[1]+l[2],d=e[1],e[1]=d>v?v:d<m?m:d;else{var g=this._easing(1e-5)/1e-5;e[1]<i[1]?(d=(i[1]-e[1])/(l[0]*g),e[1]=i[1]-this._easing(d)*l[0]):e[1]>n[1]&&(d=(e[1]-n[1])/(l[2]*g),e[1]=n[1]+this._easing(d)*l[2]),e[0]<i[0]?(d=(i[0]-e[0])/(l[3]*g),e[0]=i[0]-this._easing(d)*l[3]):e[0]>n[0]&&(d=(e[0]-n[0])/(l[1]*g),e[0]=n[0]+this._easing(d)*l[1])}this._setPosAndTriggerChange(e,!0,t)}},e.prototype._end=function(t){var e=this.get();if(this._isInterrupting()&&this._status.moveDistance){if(0===t.distance)this._setInterrupt(!1),this.trigger("release",{depaPos:e.concat(),destPos:e.concat(),hammerEvent:t||null});else{var i=this._status.currentOptions.direction,n=this._status.currentOptions.scale,o=Math.abs(t.velocityX),r=Math.abs(t.velocityY);!(i&h.DIRECTION.DIRECTION_HORIZONTAL)&&(o=0),!(i&h.DIRECTION.DIRECTION_VERTICAL)&&(r=0);var s=a.default.getNextOffsetPos([o*(t.deltaX<0?-1:1)*n[0],r*(t.deltaY<0?-1:1)*n[1]],this.options.deceleration),c=[e[0]+s[0],e[1]+s[1]];c=a.default.getPointOfIntersection(e,c,this.options.min,this.options.max,this.options.circular,this.options.bounce),this.trigger("release",{depaPos:e.concat(),destPos:c,hammerEvent:t||null}),e[0]!==c[0]||e[1]!==c[1]?this._animateTo(c,null,t||null):this._setInterrupt(!1)}this._status.moveDistance=null}},e.prototype._isInterrupting=function(){return this._status.currentOptions.interruptable||this._status.prevented},e.prototype._setInterrupt=function(t){!this._status.currentOptions.interruptable&&(this._status.prevented=t)},e}(t)},t.exports=e.default},function(t,e,i){"use strict";var n=i(4),o=function(t){return t&&t.__esModule?t:{default:t}}(n);o.default.VERSION="2.0.0-beta",t.exports=o.default},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.Component=function(){function t(){n(this,t),this._eventHandler={},this.options={}}return r(t,[{key:"option",value:function(){if(arguments.length>=2){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1];return this.options[t]=e,this}var i=arguments.length<=0?void 0:arguments[0];if("string"==typeof i)return this.options[i];if(0===arguments.length)return this.options;var n=i;return this.options=n,this}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._eventHandler[t]||[];if(!(i.length>0))return!0;i=i.concat(),e.eventType=t;var n=!1,o=[e],r=void 0;e.stop=function(){return n=!0};for(var s=arguments.length,a=Array(s>2?s-2:0),h=2;h<s;h++)a[h-2]=arguments[h];a.length>=1&&(o=o.concat(a));for(r in i)i[r].apply(this,o);return!n}},{key:"once",value:function(t,e){if("object"===(void 0===t?"undefined":o(t))&&void 0===e){var i=t,n=void 0;for(n in i)this.once(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this;this.on(t,function i(){for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];e.apply(r,o),r.off(t,i)})}return this}},{key:"hasOn",value:function(t){return!!this._eventHandler[t]}},{key:"on",value:function(t,e){if("object"===(void 0===t?"undefined":o(t))&&void 0===e){var i=t,n=void 0;for(n in i)this.on(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this._eventHandler[t];void 0===r&&(r=this._eventHandler[t]=[]),r.push(e)}return this}},{key:"off",value:function(t,e){if(void 0===t)return this._eventHandler={},this;if(void 0===e){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var i=t,n=void 0;for(n in i)this.off(n,i[n]);return this}var o=this._eventHandler[t];if(o){var r=void 0,s=void 0;for(r=0,s;s=o[r];r++)if(s===e){o=o.splice(r,1);break}}return this}}]),t}()},function(t,e,i){"use strict";var n=i(0);t.exports=n.Component}])})},function(t,e,i){var n;!function(o,r,s,a){"use strict";function h(t,e,i){return setTimeout(f(t,i),e)}function c(t,e,i){return!!Array.isArray(t)&&(u(t,i[e],i),!0)}function u(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function l(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,n,i),t.apply(this,arguments)}}function p(t,e,i){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,i&&dt(n,i)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==gt?t.apply(e?e[0]||a:a,e):t}function m(t,e){return t===a?e:t}function v(t,e,i){u(w(e),function(e){t.addEventListener(e,i,!1)})}function g(t,e,i){u(w(e),function(e){t.removeEventListener(e,i,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function x(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function E(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];x(o,s)<0&&n.push(t[r]),o[r]=s,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function T(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),r=0;r<mt.length;){if(i=mt[r],(n=i?i+o:e)in t)return n;r++}return a}function O(){return Et++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function R(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function A(t){var e=t.options.inputClass;return new(e||(Ct?z:Rt?G:Ot?q:U))(t,M)}function M(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&Mt&&n-o==0,s=e&(It|St)&&n-o==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,P(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function P(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=V(e)),o>1&&!i.firstMultiple?i.firstMultiple=V(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,h=e.center=D(n);e.timeStamp=wt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=j(a,h),e.distance=Y(a,h),I(i,e),e.offsetDirection=L(e.deltaX,e.deltaY);var c=F(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=_t(c.x)>_t(c.y)?c.x:c.y,e.scale=s?Q(s.pointers,n):1,e.rotation=s?N(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,S(i,e);var u=t.element;y(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function I(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Mt&&r.eventType!==It||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}function S(t,e){var i,n,o,r,s=t.lastInterval||e,h=e.timeStamp-s.timeStamp;if(e.eventType!=St&&(h>At||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,l=F(h,c,u);n=l.x,o=l.y,i=_t(l.x)>_t(l.y)?l.x:l.y,r=L(c,u),t.lastInterval=e}else i=s.velocity,n=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}function V(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:yt(t.pointers[i].clientX),clientY:yt(t.pointers[i].clientY)},i++;return{timeStamp:wt(),
pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:yt(i/e),y:yt(n/e)}}function F(t,e,i){return{x:e/t||0,y:i/t||0}}function L(t,e){return t===e?Vt:_t(t)>=_t(e)?t<0?Dt:Ft:e<0?Lt:Yt}function Y(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function j(t,e,i){i||(i=Ut);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function N(t,e){return j(e[1],e[0],zt)+j(t[1],t[0],zt)}function Q(t,e){return Y(e[0],e[1],zt)/Y(t[0],t[1],zt)}function U(){this.evEl=Bt,this.evWin=Gt,this.pressed=!1,R.apply(this,arguments)}function z(){this.evEl=kt,this.evWin=Xt,R.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Kt,this.evWin=$t,this.started=!1,R.apply(this,arguments)}function B(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(It|St)&&(i=E(i.concat(n),"identifier",!0)),[i,n]}function G(){this.evTarget=te,this.targetIds={},R.apply(this,arguments)}function H(t,e){var i=b(t.touches),n=this.targetIds;if(e&(Mt|Pt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=b(t.changedTouches),a=[],h=this.target;if(r=i.filter(function(t){return y(t.target,h)}),e===Mt)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(It|St)&&delete n[s[o].identifier],o++;return a.length?[E(r.concat(a),"identifier",!0),a]:void 0}function q(){R.apply(this,arguments);var t=f(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new U(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function k(t,e){t&Mt?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(It|St)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,o=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(o,ee)}}function Z(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(r<=ie&&s<=ie)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function $(t){if(_(t,ae))return ae;var e=_(t,he),i=_(t,ce);return e&&i?ae:e||i?e?he:ce:_(t,se)?se:re}function J(t){this.options=dt({},this.defaults,t||{}),this.id=O(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=le,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ve?"cancel":t&de?"end":t&fe?"move":t&pe?"start":""}function et(t){return t==Yt?"down":t==Lt?"up":t==Dt?"left":t==Ft?"right":""}function it(t,e){var i=e.manager;return i?i.get(t):t}function nt(){J.apply(this,arguments)}function ot(){nt.apply(this,arguments),this.pX=null,this.pY=null}function rt(){nt.apply(this,arguments)}function st(){J.apply(this,arguments),this._timer=null,this._input=null}function at(){nt.apply(this,arguments)}function ht(){nt.apply(this,arguments)}function ct(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ut(t,e){return e=e||{},e.recognizers=m(e.recognizers,ut.defaults.preset),new lt(t,e)}function lt(t,e){this.options=dt({},ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=A(this),this.touchAction=new K(this,this.options.touchAction),pt(this,!0),u(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var i=t.element;if(i.style){var n;u(t.options.cssProps,function(o,r){n=T(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ft(t,e){var i=r.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var dt,mt=["","webkit","Moz","MS","ms","o"],vt=r.createElement("div"),gt="function",yt=Math.round,_t=Math.abs,wt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var xt=l(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===a)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),bt=l(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),Et=1,Tt=/mobile|tablet|ip(ad|hone|od)|android/i,Ot="ontouchstart"in o,Ct=T(o,"PointerEvent")!==a,Rt=Ot&&Tt.test(navigator.userAgent),At=25,Mt=1,Pt=2,It=4,St=8,Vt=1,Dt=2,Ft=4,Lt=8,Yt=16,jt=Dt|Ft,Nt=Lt|Yt,Qt=jt|Nt,Ut=["x","y"],zt=["clientX","clientY"];R.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:Mt,mousemove:Pt,mouseup:It},Bt="mousedown",Gt="mousemove mouseup";p(U,R,{handler:function(t){var e=Wt[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=It),this.pressed&&(e&It&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Ht={pointerdown:Mt,pointermove:Pt,pointerup:It,pointercancel:St,pointerout:St},qt={2:"touch",3:"pen",4:"mouse",5:"kinect"},kt="pointerdown",Xt="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(kt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),p(z,R,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Ht[n],r=qt[t.pointerType]||t.pointerType,s="touch"==r,a=x(e,t.pointerId,"pointerId");o&Mt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(It|St)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var Zt={touchstart:Mt,touchmove:Pt,touchend:It,touchcancel:St},Kt="touchstart",$t="touchstart touchmove touchend touchcancel";p(W,R,{handler:function(t){var e=Zt[t.type];if(e===Mt&&(this.started=!0),this.started){var i=B.call(this,t,e);e&(It|St)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Jt={touchstart:Mt,touchmove:Pt,touchend:It,touchcancel:St},te="touchstart touchmove touchend touchcancel";p(G,R,{handler:function(t){var e=Jt[t.type],i=H.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ie=25;p(q,R,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)k.call(this,e,i);else if(o&&Z.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ne=T(vt.style,"touchAction"),oe=ne!==a,re="auto",se="manipulation",ae="none",he="pan-x",ce="pan-y",ue=function(){if(!oe)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||o.CSS.supports("touch-action",i)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),oe&&this.manager.element.style&&ue[t]&&(this.manager.element.style[ne]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=_(n,ae)&&!ue[ae],r=_(n,ce)&&!ue[ce],s=_(n,he)&&!ue[he];if(o){var a=1===t.pointers.length,h=t.distance<2,c=t.deltaTime<250;if(a&&h&&c)return}return s&&r?void 0:o||r&&i&jt||s&&i&Nt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var le=1,pe=2,fe=4,de=8,me=de,ve=16;J.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=it(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<de&&e(i.options.event+tt(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=de&&e(i.options.event+tt(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|le)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);return d(this.options.enable,[this,e])?(this.state&(me|ve|32)&&(this.state=le),this.state=this.process(e),this.state&(pe|fe|de|ve)&&this.tryEmit(e),void 0):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},p(nt,J,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(pe|fe),o=this.attrTest(t);return n&&(i&St||!o)?e|ve:n||o?i&It?e|de:e&pe?e|fe:pe:32}}),p(ot,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Qt},getTouchAction:function(){var t=this.options.direction,e=[];return t&jt&&e.push(ce),t&Nt&&e.push(he),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&jt?(o=0===r?Vt:r<0?Dt:Ft,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===s?Vt:s<0?Lt:Yt,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return nt.prototype.attrTest.call(this,t)&&(this.state&pe||!(this.state&pe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(rt,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&pe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(st,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[re]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(It|St)&&!o)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=h(function(){this.state=me,this.tryEmit()},e.time,this);else if(t.eventType&It)return me;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===me&&(t&&t.eventType&It?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),p(at,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&pe)}}),p(ht,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:jt|Nt,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(jt|Nt)?e=t.overallVelocity:i&jt?e=t.overallVelocityX:i&Nt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&It},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(ct,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=It)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=me,this.tryEmit()},e.interval,this),pe):me}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ut.VERSION="2.0.7",ut.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[rt,{enable:!1},["rotate"]],[ht,{direction:jt}],[ot,{direction:jt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},lt.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&me)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(pe|fe|de)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof J)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=x(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return u(w(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==a){var i=this.handlers;return u(w(t),function(t){e?i[t]&&i[t].splice(x(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(ut,{INPUT_START:Mt,INPUT_MOVE:Pt,INPUT_END:It,INPUT_CANCEL:St,STATE_POSSIBLE:le,STATE_BEGAN:pe,STATE_CHANGED:fe,STATE_ENDED:de,STATE_RECOGNIZED:me,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Vt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:Ft,DIRECTION_UP:Lt,DIRECTION_DOWN:Yt,DIRECTION_HORIZONTAL:jt,DIRECTION_VERTICAL:Nt,DIRECTION_ALL:Qt,Manager:lt,Input:R,TouchAction:K,TouchInput:G,MouseInput:U,PointerEventInput:z,TouchMouseInput:q,SingleTouchInput:W,Recognizer:J,AttrRecognizer:nt,Tap:ct,Pan:ot,Swipe:ht,Pinch:rt,Rotate:at,Press:st,on:v,off:g,each:u,merge:bt,extend:xt,assign:dt,inherit:p,bindFn:f,prefixed:T}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=ut,(n=function(){return ut}.call(e,i,e,t))!==a&&(t.exports=n)}(window,document)}])}),function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],2:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(t,e){for(var i,o,h=n(t),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var u in i)s.call(i,u)&&(h[u]=i[u]);if(r){o=r(i);for(var l=0;l<o.length;l++)a.call(i,o[l])&&(h[o[l]]=i[o[l]])}}return h}},{}],3:[function(t,e,i){var n=window.MathUtil||{};n.degToRad=Math.PI/180,n.radToDeg=180/Math.PI,n.Vector2=function(t,e){this.x=t||0,this.y=e||0},n.Vector2.prototype={constructor:n.Vector2,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},n.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},n.Vector3.prototype={constructor:n.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var e=1/t;this.multiplyScalar(e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,s=t.z,a=t.w,h=a*e+r*n-s*i,c=a*i+s*e-o*n,u=a*n+o*i-r*e,l=-o*e-r*i-s*n;return this.x=h*a+l*-o+c*-s-u*-r,this.y=c*a+l*-r+u*-o-h*-s,this.z=u*a+l*-s+h*-r-c*-o,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var i=t.x,n=t.y,o=t.z,r=e.x,s=e.y,a=e.z;return this.x=n*a-o*s,this.y=o*r-i*a,this.z=i*s-n*r,this}},n.Quaternion=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,i){var n=Math.cos(t/2),o=Math.cos(e/2),r=Math.cos(i/2),s=Math.sin(t/2),a=Math.sin(e/2),h=Math.sin(i/2);return this.x=s*o*r+n*a*h,this.y=n*a*r-s*o*h,this.z=n*o*h+s*a*r,this.w=n*o*r-s*a*h,this},setFromEulerYXZ:function(t,e,i){var n=Math.cos(t/2),o=Math.cos(e/2),r=Math.cos(i/2),s=Math.sin(t/2),a=Math.sin(e/2),h=Math.sin(i/2);return this.x=s*o*r+n*a*h,this.y=n*a*r-s*o*h,this.z=n*o*h-s*a*r,this.w=n*o*r+s*a*h,this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(i),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t.x,n=t.y,o=t.z,r=t.w,s=e.x,a=e.y,h=e.z,c=e.w;return this.x=i*c+r*s+n*h-o*a,this.y=n*c+r*a+o*s-i*h,this.z=o*c+r*h+i*a-n*s,this.w=r*c-i*s-n*a-o*h,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this.x,n=this.y,o=this.z,r=this.w,s=r*t.w+i*t.x+n*t.y+o*t.z;if(s<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,s=-s):this.copy(t),s>=1)return this.w=r,this.x=i,this.y=n,this.z=o,this;var a=Math.acos(s),h=Math.sqrt(1-s*s);if(Math.abs(h)<.001)return this.w=.5*(r+this.w),this.x=.5*(i+this.x),this.y=.5*(n+this.y),this.z=.5*(o+this.z),this;var c=Math.sin((1-e)*a)/h,u=Math.sin(e*a)/h;return this.w=r*c+this.w*u,this.x=i*c+this.x*u,this.y=n*c+this.y*u,this.z=o*c+this.z*u,this},setFromUnitVectors:function(){var t,e,i=1e-6;return function(o,r){return void 0===t&&(t=new n.Vector3),e=o.dot(r)+1,e<i?(e=0,Math.abs(o.x)>Math.abs(o.z)?t.set(-o.y,o.x,0):t.set(0,-o.z,o.y)):t.crossVectors(o,r),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this.normalize(),this}}()},e.exports=n},{}],4:[function(t,e,i){function n(t){this.kFilter=t,this.currentAccelMeasurement=new o,this.currentGyroMeasurement=new o,this.previousGyroMeasurement=new o,s.isIOS()?this.filterQ=new r.Quaternion(-1,0,0,1):this.filterQ=new r.Quaternion(1,0,0,1),this.previousFilterQ=new r.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r.Vector3,this.measuredGravity=new r.Vector3,this.gyroIntegralQ=new r.Quaternion}var o=t("./sensor-sample.js"),r=t("../math-util.js"),s=t("../util.js");n.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},n.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var i=e-this.previousGyroMeasurement.timestampS;s.isTimestampDeltaValid(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},n.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var i=new r.Quaternion;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new r.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),s.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",r.radToDeg*s.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var o=new r.Quaternion;o.copy(this.filterQ),o.multiply(n),this.filterQ.slerp(o,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},n.prototype.getOrientation=function(){return this.filterQ},n.prototype.accelToQuaternion_=function(t){var e=new r.Vector3;e.copy(t),e.normalize();var i=new r.Quaternion;return i.setFromUnitVectors(new r.Vector3(0,0,-1),e),i.inverse(),i},n.prototype.gyroToQuaternionDelta_=function(t,e){var i=new r.Quaternion,n=new r.Vector3;return n.copy(t),n.normalize(),i.setFromAxisAngle(n,t.length()*e),i},e.exports=n},{"../math-util.js":3,"../util.js":7,"./sensor-sample.js":6}],5:[function(t,e,i){function n(t){this.predictionTimeS=t,this.previousQ=new o.Quaternion,this.previousTimestampS=null,this.deltaQ=new o.Quaternion,this.outQ=new o.Quaternion}var o=t("../math-util"),r=t("../util");n.prototype.getPrediction=function(t,e,i){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=i,t;var n=new o.Vector3;n.copy(e),n.normalize();var s=e.length();if(s<20*o.degToRad)return r.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(o.radToDeg*s).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var a=(i-this.previousTimestampS,s*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(n,a),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=i,this.outQ},e.exports=n},{"../math-util":3,"../util":7}],6:[function(t,e,i){function n(t,e){this.set(t,e)}n.prototype.set=function(t,e){this.sample=t,this.timestampS=e},n.prototype.copy=function(t){this.set(t.sample,t.timestampS)},e.exports=n},{}],7:[function(t,e,i){var n=t("object-assign"),o=window.Util||{};o.MIN_TIMESTEP=.001,o.MAX_TIMESTEP=1,o.base64=function(t,e){return"data:"+t+";base64,"+e},o.clamp=function(t,e,i){return Math.min(Math.max(e,t),i)},o.lerp=function(t,e,i){return t+(e-t)*i},o.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),o.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),o.isFirefoxAndroid=function(){var t=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return t}}(),o.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},o.isTimestampDeltaValid=function(t){return!isNaN(t)&&(!(t<=o.MIN_TIMESTEP)&&!(t>o.MAX_TIMESTEP))},o.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},o.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},o.requestFullscreen=function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},o.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},o.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},o.linkProgram=function(t,e,i,n){var o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,e),t.compileShader(o);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,i),t.compileShader(r);var s=t.createProgram();t.attachShader(s,o),t.attachShader(s,r);for(var a in n)t.bindAttribLocation(s,n[a],a);return t.linkProgram(s),t.deleteShader(o),t.deleteShader(r),s},o.getProgramUniforms=function(t,e){for(var i={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o="",r=0;r<n;r++){var s=t.getActiveUniform(e,r);o=s.name.replace("[0]",""),i[o]=t.getUniformLocation(e,o)}return i},o.orthoMatrix=function(t,e,i,n,o,r,s){var a=1/(e-i),h=1/(n-o),c=1/(r-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(o+n)*h,t[14]=(s+r)*c,t[15]=1,t},o.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},o.extend=n,o.safariCssSizeWorkaround=function(t){if(o.isIOS()){var e=t.style.width,i=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(i)+"px",setTimeout(function(){t.style.width=e,t.style.height=i},100)}window.Util=o,window.canvas=t},o.isDebug=function(){return o.getQueryParameter("debug")},o.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},o.frameDataFromPose=function(){function t(t,e,i,n){var o=Math.tan(e?e.upDegrees*r:s),a=Math.tan(e?e.downDegrees*r:s),h=Math.tan(e?e.leftDegrees*r:s),c=Math.tan(e?e.rightDegrees*r:s),u=2/(h+c),l=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((h-c)*u*.5),t[9]=(o-a)*l*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function e(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=n+n,h=o+o,c=r+r,u=n*a,l=n*h,p=n*c,f=o*h,d=o*c,m=r*c,v=s*a,g=s*h,y=s*c;return t[0]=1-(f+m),t[1]=l+y,t[2]=p-g,t[3]=0,t[4]=l-y,t[5]=1-(u+m),t[6]=d+v,t[7]=0,t[8]=p+g,t[9]=d-v,t[10]=1-(u+f),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function i(t,e,i){var n,o,r,s,a,h,c,u,l,p,f,d,m=i[0],v=i[1],g=i[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],h=e[5],c=e[6],u=e[7],l=e[8],p=e[9],f=e[10],d=e[11],t[0]=n,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=h,t[6]=c,t[7]=u,t[8]=l,t[9]=p,t[10]=f,t[11]=d,t[12]=n*m+a*v+l*g+e[12],t[13]=o*m+h*v+p*g+e[13],t[14]=r*m+c*v+f*g+e[14],t[15]=s*m+u*v+d*g+e[15]),t}function n(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],h=e[6],c=e[7],u=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],v=e[14],g=e[15],y=i*a-n*s,_=i*h-o*s,w=i*c-r*s,x=n*h-o*a,b=n*c-r*a,E=o*c-r*h,T=u*m-l*d,O=u*v-p*d,C=u*g-f*d,R=l*v-p*m,A=l*g-f*m,M=p*g-f*v,P=y*M-_*A+w*R+x*C-b*O+E*T;
return P?(P=1/P,t[0]=(a*M-h*A+c*R)*P,t[1]=(o*A-n*M-r*R)*P,t[2]=(m*E-v*b+g*x)*P,t[3]=(p*b-l*E-f*x)*P,t[4]=(h*C-s*M-c*O)*P,t[5]=(i*M-o*C+r*O)*P,t[6]=(v*w-d*E-g*_)*P,t[7]=(u*E-p*w+f*_)*P,t[8]=(s*A-a*C+c*T)*P,t[9]=(n*C-i*A-r*T)*P,t[10]=(d*b-m*w+g*y)*P,t[11]=(l*w-u*b-f*y)*P,t[12]=(a*O-s*R-h*T)*P,t[13]=(i*R-n*O+o*T)*P,t[14]=(m*_-d*x-v*y)*P,t[15]=(u*x-l*_+p*y)*P,t):null}function o(o,r,s,c,u){t(o,c?c.fieldOfView:null,u.depthNear,u.depthFar);var l=s.orientation||a,p=s.position||h;e(r,l,p),c&&i(r,r,c.offset),n(r,r)}var r=Math.PI/180,s=.25*Math.PI,a=new Float32Array([0,0,0,1]),h=new Float32Array([0,0,0]);return function(t,e,i){return!(!t||!e)&&(t.pose=e,t.timestamp=e.timestamp,o(t.leftProjectionMatrix,t.leftViewMatrix,e,i.getEyeParameters("left"),i),o(t.rightProjectionMatrix,t.rightViewMatrix,e,i.getEyeParameters("right"),i),!0)}}(),o.isInsideCrossDomainIFrame=function(){var t=window.self!==window.top,e=o.getDomainFromUrl(document.referrer),i=o.getDomainFromUrl(window.location.href);return t&&e!==i},o.getDomainFromUrl=function(t){var e;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0]},e.exports=o},{"object-assign":2}],8:[function(t,e,i){function n(t,e){n.super_.call(this),this.targetElement=t,this.controlMode=e.controlMode,this._needDeviceOrientationControl=o(e.controlMode),this._needPointerControl=!0,this._quaternion=u.create(),this.initialConfig={yaw:e.initialYaw||0,pitch:e.initialPitch||0,fieldOfView:e.fieldOfView||65,minFieldOfView:e.minFieldOfView,maxFieldOfView:e.maxFieldOfView,horizontalAngleOfImage:e.horizontalAngleOfImage||360,verticalAngleOfImage:e.verticalAngleOfImage||180,aspectRatio:e.aspectRatio},this._deviceOrientationQ=u.create(),this._yaw=this.initialConfig.yaw,this._pitch=this.initialConfig.pitch,this.fieldOfView=this.initialConfig.fieldOfView,this.aspectRatio=this.initialConfig.aspectRatio,this.verticalAngleOfImage=this.initialConfig.verticalAngleOfImage,this.horizontalAngleOfImage=this.initialConfig.horizontalAngleOfImage,this._isFirstDeltaReached=!1,this._centerPolePoint=e.centerPolePoint,this._pitchMax=90,this._pitchMin=-90,this._updatePitchRange(this._centerPolePoint,this.fieldOfView,this.verticalAngleOfImage),this._yawMax=null,this._yawMin=null,this._updateYawRange(this.fieldOfView,this.aspectRatio,this.horizontalAngleOfImage),this._needDeviceOrientationControl&&(this.deviceOrientationControls=new m(e.controlMode,{initialYaw:this.initialConfig.yaw,initialPitch:this.initialConfig.pitch,initialFieldOfView:this.initialConfig.fieldOfView})),this._needPointerControl&&(this.pointerControls=new v(t,{initialYaw:this.initialConfig.yaw,initialPitch:this.initialConfig.pitch,initialFieldOfView:this.initialConfig.fieldOfView,controlMode:e.controlMode,allowPinchZoom:e.allowPinchZoom,minFieldOfView:e.minFieldOfView,maxFieldOfView:e.maxFieldOfView})),this._bindChangeHandler()}function o(t){return t===d.VR||t===d.VR_YAW||t===d.GALLERY||t===d.GALLERY_YAW||t===d.GALLERY_PITCH||t===d.GALLERY_YAW_PITCH}function r(t){return t===d.YAW||t===d.YAW_PITCH||t===d.VR_YAW||t===d.GALLERY_YAW||t===d.GALLERY_PITCH||t===d.GALLERY_YAW_PITCH}function s(t){for(var e=[.52,.54,.563,.57,.584,.59,.609,.67,.702,.72,.76,.78,.82,.92,.97,1,1.07,1.14,1.19,1.25,1.32,1.38,1.4,1.43,1.53,1.62,1.76,1.77,1.86,1.96,2.26,2.3,2.6,3,5,6],i=[.51,.54,.606,.56,.628,.63,.647,.71,.736,.757,.78,.77,.8,.89,.975,1,1.07,1.1,1.15,1.18,1.22,1.27,1.3,1.33,1.39,1.45,1.54,1.55,1.58,1.62,1.72,1.82,1.92,2,2.24,2.3],n=-1,o=0;o<e.length-1;o++)if(e[o]<=t&&e[o+1]>=t){n=o;break}if(n===-1)return e[0]>t?i[0]:i[i[0].length-1];var r=e[n],s=e[n+1],h=i[n],c=i[n+1];return a(h,c,(t-r)/(s-r))}function a(t,e,i){return t+i*(e-t)}var h=t("./utils/math-util.js").util,c=t("./utils/math-util.js").glMatrix,u=t("./utils/math-util.js").quat,l=(t("./utils/math-util.js").vec3,t("./eg.js")),p=l.eg,f=t("inherits"),d=t("./ControlMode"),m=t("./controls/DeviceOrientationControls.js"),v=t("./controls/PointerControls.js");f(n,p.Component);var g=.0375,y={CHANGE:"change"};n.prototype.getAngleOfImage=function(){return{verticalAngleOfImage:this.verticalAngleOfImage,horizontalAngleOfImage:this.horizontalAngleOfImage}},n.prototype.setFieldOfViewRange=function(t,e){this.pointerControls.setFieldOfViewRange(t,e)},n.prototype._bindChangeHandler=function(){this.pointerControls&&this.pointerControls.on("change",this._onPointerChange.bind(this)),this.pointerControls&&this.pointerControls.on("animationEnd",function(){this.trigger("animationEnd")}.bind(this)),this.deviceOrientationControls&&this.deviceOrientationControls.on("change",this._onDeviceOrientationChange.bind(this))},n.prototype._onDeviceOrientationChange=function(t){u.copy(this._deviceOrientationQ,t.quaternion);var e=0,i=0;Math.abs(t.deltaYaw)>g&&Math.abs(t.deltaYaw)<15&&(e=t.deltaYaw),Math.abs(t.deltaPitch)>g&&Math.abs(t.deltaPitch)<15&&(i=t.deltaPitch),this._isFirstDeltaReached||(this._isFirstDeltaReached=!0,e=0,i=0),null===this._yawMax&&null===this._yawMin?(this._yaw=this._yaw+e,this._yaw>180?this._yaw=this._yaw-360:this._yaw<-180&&(this._yaw=this._yaw+360)):this._yaw+e<this._yawMax&&this._yaw+e>this._yawMin?this._yaw=this._yaw+e:this._yaw+e>=this._yawMax?e<0&&(this._yaw=this._yawMax):this._yaw+e<=this._yawMin&&e>0&&(this._yaw=this._yawMin),this._pitch+i<this._pitchMax&&this._pitch+i>this._pitchMin?this._pitch=this._pitch+i:this._pitch+i>=this._pitchMax?i<0&&(this._pitch=this._pitch+i):this._pitch+i<=this._pitchMin&&i>0&&(this._pitch=this._pitch+i),this._updatePitchRange(this._centerPolePoint,this.fieldOfView,this.verticalAngleOfImage),this._updateYawRange(this.fieldOfView,this.aspectRatio,this.horizontalAngleOfImage),this._triggerChange()},n.prototype._onPointerChange=function(t){if(this._ignoreDelta)this._yaw=t.yaw;else{if(Math.abs(t.deltaYaw)>45)return;null===this._yawMax&&null===this._yawMin?(this._yaw=this._yaw+t.deltaYaw,this._yaw>180?this._yaw=this._yaw-360:this._yaw<-180&&(this._yaw=this._yaw+360)):this._yaw+t.deltaYaw<this._yawMax&&this._yaw+t.deltaYaw>this._yawMin?this._yaw=this._yaw+t.deltaYaw:this._yaw+t.deltaYaw>=this._yawMax?this._yaw=this._yawMax:this._yaw+t.deltaYaw<=this._yawMin&&(this._yaw=this._yawMin)}this._ignoreDelta?this._pitch=t.pitch:Math.abs(t.deltaPitch)>45||(this._pitch+t.deltaPitch<this._pitchMax&&this._pitch+t.deltaPitch>this._pitchMin?(this._pitch>=this._pitchMax||this._pitch<=this._pitchMin,this._pitch=this._pitch+t.deltaPitch):this._pitch+t.deltaPitch>=this._pitchMax?this._pitch=this._pitchMax:this._pitch+t.deltaPitch<=this._pitchMin&&(this._pitch=this._pitchMin));var e=this.getAngleOfImage();this.fieldOfView=t.fieldOfView,e.verticalAngleOfImage<t.fieldOfView&&(this.fieldOfView=e.verticalAngleOfImage),this._updatePitchRange(this._centerPolePoint,this.fieldOfView,this.verticalAngleOfImage),this._updateYawRange(this.fieldOfView,this.aspectRatio,this.horizontalAngleOfImage),this._triggerChange()},n.prototype._updatePitchRange=function(t,e,i){if(t||(this._pitchMax=90-e/2,this._pitchMin=-90+e/2),i<180){var n=i/2;this._pitchMax=n-e/2,this._pitchMin=-1*n+e/2}},n.prototype.setAspectRatio=function(t){this.aspectRatio=t},n.prototype._updateYawRange=function(t,e,i){e=s(e);var n=t*e;if(i<360){i>290?i=286:i>125&&(i*=.98);var o=i/2;this._yawMax=o-n/2,this._yawMin=-1*o+n/2}},n.prototype.setControlMode=function(t,e){this.controlMode=t;this._yaw=c.toDegree(h.extractYawFromQuat(this._quaternion)),this._pitch=c.toDegree(h.extractPitchFromQuat(this._quaternion)),this.fieldOfView;this._quaternion=u.create(),this._deviceOrientationQ=u.create(),this._needDeviceOrientationControl=o(t),this._needPointerControl=r(t),this.deviceOrientationControls&&(this.deviceOrientationControls.disconnect(),this.deviceOrientationControls.destroy(),this.deviceOrientationControls=null),this.pointerControls&&(this.pointerControls.destroy(),this.pointerControls=null),this._needDeviceOrientationControl&&(this.deviceOrientationControls=new m(t,{initialYaw:this.initialConfig.yaw,initialPitch:this.initialConfig.pitch}),this.deviceOrientationControls.connect()),this._needPointerControl&&(this.pointerControls=new v(this.targetElement,{initialYaw:this.initialConfig.yaw,initialPitch:this.initialConfig.pitch,initialFieldOfView:this.initialConfig.fieldOfView,controlMode:t,allowPinchZoom:e,minFieldOfView:this.initialConfig.minFieldOfView,maxFieldOfView:this.initialConfig.maxFieldOfView}),this.pointerControls.connect(),this.pointerControls.setTo({fieldOfView:this.fieldOfView},0)),this._bindChangeHandler(),this._triggerChange()},n.prototype._triggerChange=function(){this._update();var t={fieldOfView:this.fieldOfView,controlMode:this.controlMode,targetElement:this.targetElement};t.yaw=this.yaw=this._yaw,t.pitch=this.pitch=this._pitch,t.quaternion=this._quaternion,this.trigger(y.CHANGE,t)},n.prototype.connect=function(){this.pointerControls&&this.pointerControls.connect(),this.deviceOrientationControls&&this.deviceOrientationControls.connect()},n.prototype.resetOrientation=function(){this._yaw=this.initialConfig.yaw,this._pitch=this.initialConfig.pitch,this.fieldOfView=this.initialConfig.fieldOfView},n.prototype.disconnect=function(t){t||this.resetOrientation(),this.pointerControls&&this.pointerControls.disconnect(),this.deviceOrientationControls&&this.deviceOrientationControls.disconnect()},n.prototype._update=function(){this.controlMode===d.VR?this._updateWithVR():this.controlMode===d.VR_YAW?this._updateWithVRYaw():u.copy(this._quaternion,h.getQuaternionWithYawPitch(this._yaw,this._pitch))},n.prototype._updateWithYawPitch=function(){u.copy(this._quaternion,h.getQuaternionWithYawPitch(this._yaw,this._pitch))},n.prototype._updateWithVRYawPitch=function(){var t=u.create();u.rotateY(t,t,c.toRadian(this._yaw)),u.multiply(t,t,this._deviceOrientationQ),u.rotateX(t,t,c.toRadian(this._pitch)),u.copy(this._quaternion,t)},n.prototype._updateWithVRYaw=function(){var t=u.create();u.rotateY(t,t,c.toRadian(this._yaw)),u.multiply(t,t,this._deviceOrientationQ),u.rotateX(t,t,c.toRadian(this._pitch)),u.copy(this._quaternion,t)},n.prototype._updateWithVR=function(){var t=u.create();u.multiply(t,t,this._deviceOrientationQ),u.copy(this._quaternion,t)},n.prototype.updateControlScale=function(){this._updatePitchRange(this._centerPolePoint,this.fieldOfView,this.verticalAngleOfImage),this._updateYawRange(this.fieldOfView,this.aspectRatio,this.horizontalAngleOfImage),this._pitch<this._pitchMax&&this._pitch>this._pitchMin||(this._pitch>this._pitchMax?this._pitch=this._pitchMax:this._pitch<this._pitchMin&&(this._pitch=this._pitchMin)),this._yawMax&&this._yawMin&&(this._yaw<this._yawMax&&this._yaw>this._yawMin||(this._yaw>this._yawMax?this._yaw=this._yawMax:this._yaw<this._yawMin&&(this._yaw=this._yawMin))),this.pointerControls.updateMovableCoordScale()},n.prototype.lookAt=function(t,e,i){if(!(this.isAnimating||i===!1&&u.exactEquals(this._quaternion,h.getQuaternionWithYawPitch(t.yaw,t.pitch))&&t.fieldOfView===this.fieldOfView)){var n=this._yaw,o=this._pitch,r=this.fieldOfView;this._ignoreDelta=!0,this.deviceOrientationControls&&(this._deviceOrientationQ=u.create()),this.pointerControls&&this.pointerControls.setTo({yaw:n,pitch:o,fov:r},0),this._ignoreDelta=!1,this.pointerControls&&this.pointerControls.setTo(t,e)}},n.prototype.destroy=function(){this.pointerControls&&this.pointerControls.destroy(),this.deviceOrientationControls&&this.deviceOrientationControls.destroy(),this.pointerControls=null,this.deviceOrientationControls=null},e.exports=n},{"./ControlMode":9,"./controls/DeviceOrientationControls.js":15,"./controls/PointerControls.js":17,"./eg.js":18,"./utils/math-util.js":21,inherits:1}],9:[function(t,e,i){e.exports={YAW_PITCH:"yaw_pitch",YAW:"yaw",VR:"vr",VR_YAW:"vr_yaw",GALLERY:"gallery",GALLERY_YAW:"gallery_yaw",GALLERY_PITCH:"gallery_pitch",GALLERY_YAW_PITCH:"gallery_yaw_pitch"}},{}],10:[function(t,e,i){"use strict";function n(t,e){if(n.super_.call(this),e.checkSupport&&!e.checkSupport())return setTimeout(function(){this.trigger(g.ERROR,{type:n.INVALID_DEVICE,message:"invalid device"})}.bind(this),0),this;if(!n.isWebGLAvailable())return setTimeout(function(){this.trigger(g.ERROR,{type:n.NO_WEBGL,message:"no webgl support"})}.bind(this),0),this;if(!e.disableDeviceWhitelisting&&!n.isStableWebGL())return setTimeout(function(){this.trigger(g.ERROR,{type:n.INVALID_DEVICE,message:"invalid device"})}.bind(this),0),this;this.rootNode=t,this.image=e.image,this.width=e.width||parseInt(window.getComputedStyle(t).width,10),this.height=e.height||parseInt(window.getComputedStyle(t).height,10),this.controlMode=e.controlMode||m.GALLERY_YAW_PITCH,this.projectionType=e.projectionType||d.VERTICAL_CUBESTRIP,this.allowPinchZoom=!!e.allowPinchZoom,this.verticalFieldOfView=e.fieldOfView||65,e.verticalAngleOfImage&&e.verticalAngleOfImage<this.verticalFieldOfView&&(this.verticalFieldOfView=e.verticalAngleOfImage),this.isResumed=!1,this.aspectRatio=this.width/this.height,this.isVR=this.controlMode===m.VR||this.controlMode===m.VR_YAW,this.isInitialized=!1,this.quaternion=r.create();try{this._initRenderer(e.yaw,e.pitch,this.verticalFieldOfView,this.projectionType)}catch(t){return setTimeout(function(){this.photoSphereRenderer&&this.photoSphereRenderer.destroy(),this.trigger(g.ERROR,{type:n.NO_WEBGL,message:"no webgl support"})}.bind(this),0),this}this.controlComposer=new f(t,{initialYaw:e.yaw||0,initialPitch:e.pitch||0,fieldOfView:this.verticalFieldOfView,centerPolePoint:e.centerPolePoint||!1,controlMode:this.controlMode,allowPinchZoom:this.allowPinchZoom,minFieldOfView:e.minFieldOfView||20,maxFieldOfView:e.maxFieldOfView||110,horizontalAngleOfImage:e.horizontalAngleOfImage||360,verticalAngleOfImage:e.verticalAngleOfImage||180,aspectRatio:this.aspectRatio}),this._init()}var o=t("./utils/math-util.js").util,r=(t("./utils/math-util.js").vec3,t("./utils/math-util.js").quat),s=t("./utils/math-util.js").glMatrix,a=t("object-assign"),h=t("./eg.js"),c=h.eg,u=c.agent(),l=t("inherits"),p=t("./PhotoSphereRenderer.js"),f=t("./ControlComposer.js"),d=t("./ProjectionType.js"),m=t("./ControlMode"),v=t("./consts");l(n,c.Component);var g={RESUMESTART:"resumestart",RESUME:"resume",SUSPEND:"suspend",IMAGE_LOADED:"imageLoaded",VIEWPORT_CHANGE:"viewportChange",ANIMATION_END:"animationEnd",ERROR:"error",INIT:"init"};n.prototype.setImage=function(t){this.image=t,this.photoSphereRenderer&&this.photoSphereRenderer.setImage(t)},n.prototype._initRenderer=function(t,e,i,n){this.photoSphereRenderer&&this.photoSphereRenderer.destroy(),this.photoSphereRenderer=new p(this.image,this.width,this.height,{initialYaw:t,initialPitch:e,fieldOfView:i,projectionType:n}),this._bindRendererHandler()},n.prototype._bindRendererHandler=function(){this.photoSphereRenderer.on(g.ERROR,function(t){this.trigger(g.ERROR,{type:n.NO_WEBGL,message:"no webgl support"})}.bind(this)),this.photoSphereRenderer.on(g.IMAGE_LOADED,function(t){this._triggerEvent(g.IMAGE_LOADED,t)}.bind(this)),this.photoSphereRenderer.on("bindTexture",function(t){n.isGyroSensorAvailable(function(e){this.hasGyroSensor=e,!this.isInitialized&&this.photoSphereRenderer&&(this.isInitialized=!0,this._triggerEvent(g.INIT,t))}.bind(this))}.bind(this)),this.photoSphereRenderer.on("renderingContextLost",function(t){this.suspend()}.bind(this)),this.photoSphereRenderer.on("renderingContextRestore",function(t){this.resume()}.bind(this))},n.prototype._init=function(){this.controlComposer.on(g.ANIMATION_END,function(t){this._triggerEvent(g.ANIMATION_END,t)}.bind(this)),this.controlComposer.on("change",function(t){this.quaternion=t.quaternion,this.verticalFieldOfView=t.fieldOfView,this._triggerEvent(g.VIEWPORT_CHANGE,this.getOrientation())}.bind(this))},n.prototype._triggerEvent=function(t,e){var i=e||{};return i.hasGyroSensor=this.hasGyroSensor,this.trigger(t,i)},n.prototype.setControlMode=function(t,e){this.controlMode=t,void 0!==e&&(this.allowPinchZoom=e),this.controlComposer.setControlMode(t,this.allowPinchZoom)},n.prototype.setFieldOfViewRange=function(t){this.controlComposer.setFieldOfViewRange(t.minFieldOfView,t.maxFieldOfView)},n.prototype.updateViewportDimensions=function(t){if(this.isResumed){this.width=t&&t.width||parseInt(window.getComputedStyle(this.rootNode).width,10),this.height=t&&t.height||parseInt(window.getComputedStyle(this.rootNode).height,10),this.aspectRatio=this.width/this.height,this.photoSphereRenderer.updateViewportDimensions(this.width,this.height),this.controlComposer.setAspectRatio(this.aspectRatio),this.controlComposer.updateControlScale();var e=!0;this.lookAt({},0,e)}},n.prototype.getAspectRatio=function(){return this.aspectRatio},n.prototype.getVerticalFieldOfView=function(){return this.verticalFieldOfView},n.prototype.getHorizontalFieldOfView=function(){return s.toDegree(2*Math.atan(this.getAspectRatio()*Math.tan(s.toRadian(this.verticalFieldOfView)/2)))},n.prototype.getOrientation=function(){var t=o.quatToYawPitch(this.quaternion);return t.fieldOfView=this.verticalFieldOfView,t},n.prototype.getAngleOfImage=function(){return this.controlComposer.getAngleOfImage()},n.prototype.lookAt=function(t,e,i){if(this.isResumed){var n=this.getOrientation(),o=void 0!==t.yaw?t.yaw:n.yaw,r=void 0!==t.pitch?t.pitch:n.pitch,s=void 0!==t.fieldOfView?t.fieldOfView:n.fieldOfView,a=this.getAngleOfImage();a.verticalAngleOfImage<s&&(s=a.verticalAngleOfImage),this.controlComposer.lookAt({yaw:o,pitch:r,fieldOfView:s},e,i)}},n.prototype.resume=function(){!this.isResumed&&this.controlComposer&&(this.photoSphereRenderer||this._initRenderer(this.controlComposer.yaw,this.controlComposer.pitch,this.verticalFieldOfView,this.projectionType),setTimeout(function(){!this.isResumed&&this.photoSphereRenderer&&(this._triggerEvent(g.RESUMESTART),this.photoSphereRenderer.isImageLoaded()?this._resume():(this.once("imageLoaded",function(){this._resume()}.bind(this)),this.photoSphereRenderer.loadImage()))}.bind(this),0))},n.prototype._resume=function(){this.isInitialized?(this.photoSphereRenderer.attachTo(this.rootNode),this.controlComposer.connect(),this.isResumed=!0,this._triggerEvent(g.RESUME),this.updateViewportDimensions(),this._startRender()):this.once(g.INIT,function(){this.photoSphereRenderer.attachTo(this.rootNode),this.controlComposer.connect(),this.updateViewportDimensions(),this.isResumed=!0,this._triggerEvent(g.RESUME),this._startRender()}.bind(this))},n.prototype._startRender=function(){this._renderLoop=this._renderLoop.bind(this),this._rafId=window.requestAnimationFrame(this._renderLoop)},n.prototype._renderLoop=function(){var t=r.clone(this.quaternion);this.photoSphereRenderer&&this.photoSphereRenderer.isImageLoaded()&&this.photoSphereRenderer.renderWithQuaternion(t,this.verticalFieldOfView),this._rafId=window.requestAnimationFrame(this._renderLoop)},n.prototype._stopRender=function(){this._rafId&&(window.cancelAnimationFrame(this._rafId),delete this._rafId)},n.prototype.startRender=n.prototype._startRender,n.prototype.stopRender=n.prototype._stopRender,n.prototype.suspend=function(t){this.photoSphereRenderer&&(this.photoSphereRenderer.cancelLoadImage(),this.photoSphereRenderer.destroy(),this.photoSphereRenderer=null,this.isResumed&&(this.controlComposer.disconnect(t),this._stopRender(),this.isResumed=!1),this._triggerEvent(g.SUSPEND))},n.prototype.connect=function(){this.controlComposer.connect()},n.prototype.disconnect=function(t){this.controlComposer.disconnect(t)},n.prototype.destroy=function(){this._stopRender(),this.controlComposer&&(this.controlComposer.destroy(),this.controlComposer=null),this.photoSphereRenderer&&(this.photoSphereRenderer.destroy(),this.photoSphereRenderer=null),this.isResumed=!1},n.isStableWebGL=function(){var t=!0;return"android"===u.os.name&&parseFloat(u.os.version)<=4.3?t=!1:"android"===u.os.name&&4.4===parseFloat(u.os.version)?"chrome"!==u.browser.name&&(t=!1):"ios"===u.os.name&&parseInt(u.os.version,10)<=7&&(t=!1),t},n.isWebGLAvailable=function(){var t=document.createElement("canvas"),e=p.getWebglContext(t),i=!!e;if(e){var n=e.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i},n.isSupported=function(){return n.isWebGLAvailable()&&n.isStableWebGL()},n.isGyroSensorAvailable=function(t){function e(e){var o=null!==e.rotationRate.alpha;t&&t(o),clearTimeout(i),n.isGyroSensorAvailable=function(t){return t&&t(o),o}}if("undefined"==typeof window.ondevicemotion)return void(t&&t(!1));window.addEventListener("devicemotion",e);var i=setTimeout(function(){t&&t(!1),n.isGyroSensorAvailable=function(t){return t&&t(!1),!1},window.removeEventListener("devicemotion",e)},1e3)},n.prototype.getHotspotOffset=function(t,e){var i=this.getOrientation(),n=t-i.yaw;(n>180||n<-180)&&(n=t<i.yaw?t+360-i.yaw:t-(i.yaw+360));var o=90+e-(90+i.pitch);return Math.abs(n)>90?null:this._getHotspotOffsetRelativeFromViewportCenter(n,o)},n.prototype._getHotspotOffsetRelativeFromViewportCenter=function(t,e){var i=o.yawPitchToPoint(s.toRadian(t),s.toRadian(e)),n=Math.tan(s.toRadian(this.verticalFieldOfView)/2),r=Math.tan(s.toRadian(this.getHorizontalFieldOfView())/2);return{left:(r-i[0])/r*this.width/2,top:(n-i[1])/n*this.height/2}},n.ERROR_TYPE=a({},v.ERROR_TYPE),n.INVALID_DEVICE=v.ERROR_TYPE.INVALID_DEVICE,n.NO_WEBGL=v.ERROR_TYPE.NO_WEBGL,n.VERSION="1.2.3",window.Photo360Viewer=n,e.exports=n},{"./ControlComposer.js":8,"./ControlMode":9,"./PhotoSphereRenderer.js":11,"./ProjectionType.js":12,"./consts":13,"./eg.js":18,"./utils/math-util.js":21,inherits:1,"object-assign":2}],11:[function(t,e,i){function n(t,e,i,o){n.super_.call(this),this.sphericalConfig=o,this.fieldOfView=o.fieldOfView,this.autoUpdateTexture=!0,this.width=e,this.height=i,"string"==typeof t?(this.image=new Image,this._imageURL=t):"object"==typeof t&&(this.image=t),this._lastQuaternion=null,this._lastYaw=null,this._lastPitch=null,this._lastFieldOfView=null,this.pMatrix=a.create(),this.mvMatrix=a.create(),this.textureCoordBuffer=null,this.vertexBuffer=null,this.indexBuffer=null,this.isCubeStrip=o.projectionType===l.VERTICAL_CUBESTRIP||o.projectionType===l.CUBEMAP,this.canvas=null,this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=i,this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.right=0,this.canvas.style.top=0,this.canvas.style.margin="auto",this.canvas.style.maxHeight="100%",this.canvas.style.maxWidth="100%",this.canvas.style.outline="none",this.canvas.style.position="absolute",this._onWebglcontextlost=this._onWebglcontextlost.bind(this),this._onWebglcontextrestored=this._onWebglcontextrestored.bind(this),this.canvas.addEventListener("webglcontextlost",this._onWebglcontextlost),this.canvas.addEventListener("webglcontextrestored",this._onWebglcontextrestored),this._bindOnImageLoadHandler()}var o=t("./utils/math-util.js").util,r=t("./utils/math-util.js").glMatrix,s=t("./utils/math-util.js").quat,a=t("./utils/math-util.js").mat4,h=t("./eg.js"),c=h.eg,u=t("inherits"),l=t("./ProjectionType"),p=t("./getErrorNameFromWebGLErrorCode"),f=window.devicePixelRatio||1;f>2&&(f=2),u(n,c.Component);var d={BIND_TEXTURE:"bindTexture",IMAGE_LOADED:"imageLoaded",ERROR:"error"};n.prototype.isImageLoaded=function(){return!!this.image.src&&!!this.image.complete},n.prototype.cancelLoadImage=function(){this.image.src&&!this.isImageLoaded()&&(this.image.src="")},n.prototype.loadImage=function(){this._imageURL&&!this.isImageLoaded()&&(this.image.setAttribute("crossorigin","anonymous"),this.image.src=this._imageURL)},n.prototype.setImage=function(t){"string"==typeof t?(this.image=new Image,this._imageURL=t):"object"==typeof t&&(this.image=t),this._bindOnNewImageLoadHandler()},n.prototype._bindOnImageLoadHandler=function(){this.isImageLoaded()?setTimeout(function(){this._onImageLoad()}.bind(this),0):this.image.onload=function(){return this._onImageLoad()}.bind(this)},n.prototype._bindOnNewImageLoadHandler=function(){this.isImageLoaded()?setTimeout(function(){this._onNewImageLoad()}.bind(this),0):this.image.onload=function(){return this._onNewImageLoad()}.bind(this)},n.prototype._onNewImageLoad=function(){this.imageWidth=this.image.width,this.imageHeight=this.image.height,this.setAutoUpdateTexture(!0),this.render(this.sphericalConfig.initialYaw,this.sphericalConfig.initialPitch,this.sphericalConfig.fieldOfView),this.setAutoUpdateTexture(!1),this.trigger("imageLoaded")},n.prototype._onImageLoad=function(){this._init(),this.imageWidth=this.image.width,this.imageHeight=this.image.height,this.setAutoUpdateTexture(!0),this.render(this.sphericalConfig.initialYaw,this.sphericalConfig.initialPitch,this.sphericalConfig.fieldOfView),setTimeout(function(){this.setAutoUpdateTexture(!1)}.bind(this),0),this.trigger("imageLoaded")},n.prototype.attachTo=function(t){this.detach(),t.appendChild(this.canvas)},n.prototype.forceContextLoss=function(){if(this.hasRenderingContext()){var t=this.context.getExtension("WEBGL_lose_context");t&&t.loseContext()}},n.prototype.detach=function(){this.canvas.parentElement&&this.canvas.parentElement.removeChild(this.canvas)},n.prototype.isAttached=function(){return this.isImageLoaded()&&this.canvas&&this.canvas.parentNode},n.prototype.destroy=function(){this.detach(),this.forceContextLoss(),this.off(),this.canvas.removeEventListener("webglcontextlost",this._onWebglcontextlost),this.canvas.removeEventListener("webglcontextrestored",this._onWebglcontextrestored)},n.prototype.hasRenderingContext=function(){return!!this.context&&!(!this.context.getProgramParameter(this.shaderProgram,this.context.LINK_STATUS)&&!this.context.isContextLost())},n.prototype._onWebglcontextlost=function(t){t.preventDefault(),this.trigger("renderingContextLost")},n.prototype._onWebglcontextrestored=function(t){this._init(),this.trigger("renderingContextRestore")},n.prototype.setAutoUpdateTexture=function(t){this.autoUpdateTexture=t},n.prototype.updateFieldOfView=function(t){this.fieldOfView=t,this._updateViewport()},n.prototype.updateViewportDimensions=function(t,e){this.canvas.width=t*f,this.canvas.height=e*f,this._updateViewport(),this._shouldForceDraw=!0},n.prototype._updateViewport=function(){a.perspective(this.pMatrix,r.toRadian(this.fieldOfView),this.canvas.width/this.canvas.height,.1,100),this.context.viewport(0,0,this.context.drawingBufferWidth,this.context.drawingBufferHeight)},n.prototype._init=function(){try{if(this._initRenderingContext(),this.updateViewportDimensions(this.canvas.width,this.canvas.height),!this._initShaderProgram())throw new Error("Failed to intialize shaders: "+p(this.context.getError()))}catch(t){return this.trigger(d.ERROR),void this.destroy()}this.context.clearColor(0,0,0,0),this._initTexture()},n.getWebglContext=function(t){function e(t){return o=t.statusMessage}var i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,o=null;t.addEventListener("webglcontextcreationerror",e);for(var r=0;r<i.length;r++){try{n=t.getContext(i[r],{preserveDrawingBuffer:!1})}catch(t){}if(n)break}return t.removeEventListener("webglcontextcreationerror",e),n},n.prototype._initRenderingContext=function(){if(!this.hasRenderingContext()){if(!window.WebGLRenderingContext)throw new Error("WebGLRenderingContext not available.");if(this.context=n.getWebglContext(this.canvas),!this.context)throw new Error("Failed to acquire 3D rendering context")}},n.prototype._initShaderProgram=function(){var t=this._getVertexShader();if(!t)return!1;var e=this._getFragmentShader();return!!e&&(this.shaderProgram=this.context.createProgram(),this.context.attachShader(this.shaderProgram,t),this.context.attachShader(this.shaderProgram,e),this.context.linkProgram(this.shaderProgram),!!this.context.getProgramParameter(this.shaderProgram,this.context.LINK_STATUS)&&(this.context.useProgram(this.shaderProgram),this.shaderProgram.vertexPositionAttribute=this.context.getAttribLocation(this.shaderProgram,"aVertexPosition"),this.context.enableVertexAttribArray(this.shaderProgram.vertexPositionAttribute),this.shaderProgram.pMatrixUniform=this.context.getUniformLocation(this.shaderProgram,"uPMatrix"),this.shaderProgram.mvMatrixUniform=this.context.getUniformLocation(this.shaderProgram,"uMVMatrix"),this.shaderProgram.samplerUniform=this.context.getUniformLocation(this.shaderProgram,"uSampler"),this.isCubeStrip||(this.shaderProgram.textureCoordAttribute=this.context.getAttribLocation(this.shaderProgram,"aTextureCoord"),this.context.enableVertexAttribArray(this.shaderProgram.textureCoordAttribute)),!0))},n.prototype._initTexture=function(){this.texture=this.context.createTexture();var t=this.isCubeStrip?this.context.TEXTURE_CUBE_MAP:this.context.TEXTURE_2D;this.context.bindTexture(t,this.texture),this.context.texParameteri(t,this.context.TEXTURE_MAG_FILTER,this.context.LINEAR),this.context.texParameteri(t,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR),this.context.texParameteri(t,this.context.TEXTURE_WRAP_S,this.context.CLAMP_TO_EDGE),this.context.texParameteri(t,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE),this.context.bindTexture(t,null)},n.prototype._initBuffersForSphere=function(){var t,e,i=60,n=60,o=2,r=[],s=[],a=[];for(t=0;t<=i;t++){var h=(t/i-.5)*Math.PI,c=Math.sin(h),u=Math.cos(h);for(e=0;e<=n;e++){var l=2*(e/n-.5)*Math.PI,p=Math.sin(l),f=Math.cos(l),d=f*u,m=c,v=p*u,g=e/n,y=t/i;if(r.push(g,y),s.push(o*d,o*m,o*v),e!==n&&t!==i){var _=t*(n+1)+e,w=_+n+1;a.push(_,w,_+1,w,w+1,_+1)}}}this.textureCoordBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.textureCoordBuffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(r),this.context.STATIC_DRAW),this.textureCoordBuffer.itemSize=2,this.textureCoordBuffer.numItems=r.length/2,this.vertexBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.vertexBuffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(s),this.context.STATIC_DRAW),this.vertexBuffer&&(this.vertexBuffer.itemSize=3,this.vertexBuffer.numItems=s.length/3),this.indexBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),this.context.STATIC_DRAW),this.indexBuffer&&(this.indexBuffer.itemSize=1,this.indexBuffer.numItems=a.length)},n.prototype._initBuffersForCube=function(){var t=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1];this.vertexBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.vertexBuffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(t),this.context.STATIC_DRAW),this.vertexBuffer&&(this.vertexBuffer.itemSize=3,this.vertexBuffer.numItems=t.length/3);for(var e=[],i=0;i<t.length/3;i+=4)e.push(i,i+2,i+1,i,i+3,i+2);this.indexBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this.context.STATIC_DRAW),this.indexBuffer&&(this.indexBuffer.itemSize=1,this.indexBuffer.numItems=e.length)},n.prototype._getVertexShader=function(){var t=this.context.createShader(this.context.VERTEX_SHADER),e="attribute vec3 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying highp vec3 vVertexDirectionVector;void main(void) {gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);vVertexDirectionVector = aVertexPosition;}",i="attribute vec3 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying highp vec2 vTextureCoord;void main(void) {gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);vTextureCoord = aTextureCoord;}",n=this.isCubeStrip?e:i;return this.context.shaderSource(t,n),this.context.compileShader(t),this.context.getShaderParameter(t,this.context.COMPILE_STATUS)?t:null},n.prototype._getFragmentShader=function(){var t=this.context.createShader(this.context.FRAGMENT_SHADER),e="varying highp vec3 vVertexDirectionVector;uniform samplerCube uSampler;void main(void) {gl_FragColor = textureCube(uSampler, vVertexDirectionVector);}",i="varying highp vec2 vTextureCoord;uniform sampler2D uSampler;void main(void) {gl_FragColor = texture2D(uSampler,vec2(vTextureCoord.s, vTextureCoord.t));}",n=this.isCubeStrip?e:i;
return this.context.shaderSource(t,n),this.context.compileShader(t),this.context.getShaderParameter(t,this.context.COMPILE_STATUS)?t:null},n.prototype._bindTexture=function(){this.isCubeStrip?this._bindCubeStripTexture():this._bindEquirectangularTexture()},n.prototype.renderWithQuaternion=function(t,e){if(this.hasRenderingContext()&&(this._shouldForceDraw=!0,!(this._lastQuaternion&&s.exactEquals(this._lastQuaternion,t)&&this.fieldOfView&&this.fieldOfView===e&&this._shouldForceDraw===!1))){this.autoUpdateTexture&&this._bindTexture(),void 0!==e&&e!==this.fieldOfView&&this.updateFieldOfView(e);var i;if(this.isCubeStrip)i=t;else{var n=s.rotateY(s.create(),s.create(),r.toRadian(-90));i=this.isCubeStrip?t:s.multiply(s.create(),n,t)}this.mvMatrix=a.fromQuat(a.create(),s.conjugate(s.create(),i)),this._draw(),this._lastQuaternion=s.clone(t),this._shouldForceDraw&&(this._shouldForceDraw=!1)}},n.prototype.render=function(t,e,i){this.hasRenderingContext()&&(this._lastYaw&&this._lastYaw===t&&this._lastPitch&&this._lastPitch===e&&this.fieldOfView&&this.fieldOfView===i&&this._shouldForceDraw===!1||(this.autoUpdateTexture&&this._bindTexture(),void 0!==i&&i!==this.fieldOfView&&this.updateFieldOfView(i),a.identity(this.mvMatrix),a.rotateX(this.mvMatrix,this.mvMatrix,-r.toRadian(e)),a.rotateY(this.mvMatrix,this.mvMatrix,-r.toRadian(t-(this.isCubeStrip?0:90))),this._draw(),this._lastYaw=t,this._lastPitch=e,this._shouldForceDraw&&(this._shouldForceDraw=!1)))},n.prototype._draw=function(){this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT),this.context.activeTexture(this.context.TEXTURE0),this.isCubeStrip?(this.context.bindTexture(this.context.TEXTURE_CUBE_MAP,this.texture),null===this.vertexBuffer&&this._initBuffersForCube(this.sphericalConfig.projectionType,this.sphericalConfig.expansionCoef||0,0)):(this.context.bindTexture(this.context.TEXTURE_2D,this.texture),this._initBuffersForSphere(0),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.textureCoordBuffer),this.context.vertexAttribPointer(this.shaderProgram.textureCoordAttribute,this.textureCoordBuffer.itemSize,this.context.FLOAT,!1,0,0)),this.context.uniform1i(this.shaderProgram.samplerUniform,0),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.vertexBuffer),this.vertexBuffer&&this.context.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.vertexBuffer.itemSize,this.context.FLOAT,!1,0,0),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.context.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.pMatrix),this.context.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.mvMatrix),this.indexBuffer&&this.context.drawElements(this.context.TRIANGLES,this.indexBuffer.numItems,this.context.UNSIGNED_SHORT,0),this.isCubeStrip?this.context.bindTexture(this.context.TEXTURE_CUBE_MAP,null):this.context.bindTexture(this.context.TEXTURE_2D,null)},n.prototype._getMaxCubeMapTextureSize=function(t){var e=this.context.getParameter(this.context.MAX_CUBE_MAP_TEXTURE_SIZE),i=t,n=c.agent();if("ie"===n.browser.name&&11===parseInt(n.browser.version,10)&&!o.isPowerOfTwo(i))for(var r=1;r<e;r*=2)if(!(r<i)){i=r;break}return"ios"===n.os.name&&9===parseInt(n.os.version,10)&&(i=1024),"ios"===n.os.name&&8===parseInt(n.os.version,10)&&(i=512),this.isImageLoaded()?Math.min(e,i):e},n.prototype._bindEquirectangularTexture=function(){if(this.isImageLoaded()){var t=this.context.getParameter(this.context.MAX_TEXTURE_SIZE),e=this.imageWidth,i=this.imageHeight,n=i/e,o=document.createElement("canvas");n<=1?(o.width=Math.min(e,t),o.height=o.width*n):(o.height=Math.min(i,t),o.width=o.height/n),this.context.bindTexture(this.context.TEXTURE_2D,this.texture),this.context.pixelStorei(this.context.UNPACK_FLIP_Y_WEBGL,!0);var r=o.getContext("2d");r.drawImage(this.image,0,0,e,i,0,0,o.width,o.height);var s=new Uint8Array(r.getImageData(0,0,o.width,o.height).data);this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,o.width,o.height,0,this.context.RGBA,this.context.UNSIGNED_BYTE,s),this.trigger(d.BIND_TEXTURE),this.context.bindTexture(this.context.TEXTURE_2D,null)}},n.prototype._bindCubeStripTexture=function(){if(this.isImageLoaded()){var t=c.agent(),e=(this.image,!1);("sbrowser"===t.browser.name&&parseFloat(window.navigator.userAgent.split("SamsungBrowser/")[1].split(" ")[0])<5||"ios"===t.os.name&&parseInt(t.os.version,10)<=9)&&(e=!0);var i=this.imageWidth,n=this._getMaxCubeMapTextureSize(i),o=1;"android"===t.os.name&&(parseFloat(t.os.version)<=4.3&&"chrome"===t.browser.name||"5.0.2"===t.os.version&&"sbrowser"===t.browser.name||"5.1.1"===t.os.version&&"sbrowser"===t.browser.name&&window.navigator.userAgent.indexOf("SM-N920")!==-1&&parseFloat(window.navigator.userAgent.split("SamsungBrowser/")[1].split(" ")[0])<4?o=768/i:"5.0"===t.os.version&&"sbrowser"===t.browser.name&&window.navigator.userAgent.indexOf("SM-G900")!==-1&&(o=1344/i));try{if(this.context.pixelStorei(this.context.UNPACK_FLIP_Y_WEBGL,!1),this.context.bindTexture(this.context.TEXTURE_CUBE_MAP,this.texture),e){var r=document.createElement("canvas"),s=r.getContext("2d");r.width=3*n,r.height=n;var a=document.createElement("canvas"),h=a.getContext("2d");a.width=n,a.height=n;for(var u=0;u<2;u++){s.save(),s.translate(0,n),s.rotate(-Math.PI/2),s.scale(1/3,3),s.drawImage(this.image,0,3*i*u*o,this.image.width,this.image.height/2*o,0,0,r.width,r.height),s.restore();for(var l=0;l<3;l++){h.save(),h.translate(n,0),h.rotate(Math.PI/2),h.drawImage(r,l*i,0,i,i,0,0,n,n),h.restore();var p=new Uint8Array(h.getImageData(0,0,n,n).data);this.context.texImage2D(this.context.TEXTURE_CUBE_MAP_POSITIVE_X+3*u+l,0,this.context.RGBA,n,n,0,this.context.RGBA,this.context.UNSIGNED_BYTE,p)}}}else{var f=document.createElement("canvas");f.width=n,f.height=n;for(var s=f.getContext("2d"),m=0;m<6;m++){s.drawImage(this.image,0,m*(i*o),i,i*o,0,0,n,n);var p=new Uint8Array(s.getImageData(0,0,n,n).data);this.context.texImage2D(this.context.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,this.context.RGBA,n,n,0,this.context.RGBA,this.context.UNSIGNED_BYTE,p)}}}catch(t){}this.trigger(d.BIND_TEXTURE),this.context.bindTexture(this.context.TEXTURE_CUBE_MAP,null)}},e.exports=n},{"./ProjectionType":12,"./eg.js":18,"./getErrorNameFromWebGLErrorCode":19,"./utils/math-util.js":21,inherits:1}],12:[function(t,e,i){e.exports={EQUIRECTANGULAR:"equirectangular",VERTICAL_CUBESTRIP:"vertical_cubestrip"}},{}],13:[function(t,e,i){var n={INVALID_DEVICE:10,NO_WEBGL:11};e.exports={ERROR_TYPE:n}},{}],14:[function(t,e,i){function n(){n.super_.call(this),this._onDeviceMotion=this._onDeviceMotion.bind(this),this._onDeviceOrientation=this._onDeviceOrientation.bind(this),this.isAndroid=!1;var t=s.agent();"android"===t.os.name&&(this.isAndroid=!0),this.stillGyroVec=o.create(),this.rawGyroVec=o.create(),this.adjustedGyroVec=o.create(),this._timer=null,this.lastDevicemotionTimestamp=0}var o=t("../utils/math-util.js").vec3,r=t("../eg.js"),s=r.eg,a=t("inherits");a(n,s.Component);var h=200;n.prototype._onDeviceOrientation=function(t){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){(new Date).getTime()-e.lastDevicemotionTimestamp<h&&o.copy(e.stillGyroVec,e.rawGyroVec)},h)},n.prototype._onDeviceMotion=function(t){this.isAndroid&&(o.set(this.rawGyroVec,t.rotationRate.alpha||0,t.rotationRate.beta||0,t.rotationRate.gamma||0),o.subtract(this.adjustedGyroVec,this.rawGyroVec,this.stillGyroVec),this.lastDevicemotionTimestamp=(new Date).getTime(),t.adjustedRotationRate={alpha:this.adjustedGyroVec[0],beta:this.adjustedGyroVec[1],gamma:this.adjustedGyroVec[2]}),this.trigger("devicemotion",t)},n.prototype.connect=function(){this.isAndroid&&window.addEventListener("deviceorientation",this._onDeviceOrientation),window.addEventListener("devicemotion",this._onDeviceMotion)},n.prototype.disconnect=function(){this.isAndroid&&window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("devicemotion",this._onDeviceMotion)},e.exports=n},{"../eg.js":18,"../utils/math-util.js":21,inherits:1}],15:[function(t,e,i){function n(t,e){n.super_.call(this),this.controlMode=t,this.quaternion=a.create(),this.prevQuaternion=a.create(),this.relativeQuaternion=a.create(),this.pitch=e.initialPitch,this.yaw=e.initialYaw,this.fieldOfView=e.initialFieldOfView,this.offsetQuaternion=null,this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this._initFusionPoseSensor()}function o(t,e,i){var n=d[i].targetAxis,o=d[i].meshPoint,r=a.clone(t);a.normalize(r,r);var c=a.clone(e);a.normalize(c,c);var u=s.fromValues(0,0,1),l=s.fromValues(0,0,1),p=s.fromValues(n[0],n[1],n[2]);s.transformQuat(u,u,r),s.transformQuat(l,l,c),s.transformQuat(p,p,c);var f=s.dot(p,s.cross(s.create(),u,l)),m=f>0?1:-1,v=s.fromValues(0,0,0),g=s.fromValues(o[0],o[1],o[2]);if(i!==d.YAW_DELTA_BY_YAW)var y=s.fromValues(0,m,0);else var y=s.fromValues(m,0,0);s.transformQuat(g,g,c),s.transformQuat(y,y,c);var _=g,w=y,x=s.create();s.cross(x,_,w),s.normalize(x,x);var b=x[0],E=x[1],T=x[2],l=(-1*s.dot(x,v),s.fromValues(o[0],o[1],o[2]));s.transformQuat(l,l,c);var u=s.fromValues(o[0],o[1],o[2]);s.transformQuat(u,u,r);var O=Math.abs(u[0]*b+u[1]*E+u[2]*T),C=s.create();s.subtract(C,u,s.scale(s.create(),x,O));var R=(C[0]*l[0]+C[1]*l[1]+C[2]*l[2])/(s.length(C)*s.length(l));R>1&&(R=1);var A=Math.acos(R),M=s.create();s.cross(M,l,C);var O=b*M[0]+E*M[1]+T*M[2];if(i!==d.YAW_DELTA_BY_YAW)var P=O>0?1:-1;else var P=O<0?1:-1;var I=A*P*m;return h.toDegree(I)}var r=t("../utils/math-util.js").util,s=t("../utils/math-util.js").vec3,a=t("../utils/math-util.js").quat,h=t("../utils/math-util.js").glMatrix,c=t("../ControlMode"),u=t("../eg.js"),l=u.eg,p=t("inherits"),f=t("./FusionPoseSensor.js");p(n,l.Component),n.prototype._initFusionPoseSensor=function(){this.fusionPoseSensor=new f,this.fusionPoseSensor.on("change",function(){this.update();var t=void 0!==this.prevYaw?180+this.yaw-(180+this.prevYaw):0,e=void 0!==this.prevPitch?90+this.pitch-(90+this.prevPitch):0;switch(this.controlMode){case c.VR:case c.VR_YAW:this.trigger("change",{quaternion:this.quaternion,deltaYaw:t,deltaPitch:e});break;case c.GALLERY:case c.GALLERY_YAW:case c.GALLERY_PITCH:case c.GALLERY_YAW_PITCH:this.trigger("change",{quaternion:this.relativeQuaternion,deltaYaw:t,deltaPitch:e})}this.prevYaw=this.yaw,this.prevPitch=this.pitch}.bind(this))},n.prototype.connect=function(){this._initFusionPoseSensor(),this.fusionPoseSensor.connect(),this.enabled=!0},n.prototype.disconnect=function(){this.fusionPoseSensor&&this.fusionPoseSensor.disconnect(),this.fusionPoseSensor=null,this.quaternion=a.create(),this.prevQuaternion=a.create(),this.relativeQuaternion=a.create(),this.offsetQuaternion=null,this.enabled=!1},n.prototype.destroy=function(){this.disconnect()},n.prototype.update=function(){if(this.enabled!==!1){var t=a.normalize(a.create(),this.fusionPoseSensor.getOrientation());null===this.offsetQuaternion&&(this.offsetQuaternion=a.clone(t)),a.copy(this.prevQuaternion,this.quaternion),a.copy(this.quaternion,t),this._computeRelativeQuaternion()}};var d={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};d[d.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},d[d.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},d[d.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]},n.prototype._computeRelativeQuaternion=function(){if(null!==this.offsetQuaternion&&!a.exactEquals(a.fromValues(this.prevQuaternion[0],this.prevQuaternion[1],this.prevQuaternion[2],this.prevQuaternion[3]),a.create())&&0!==r.extractYawFromQuat(this.prevQuaternion)){if(!this._skippedFirst)return void(this._skippedFirst=!0);var t=a.create();a.normalize(t,this.quaternion);var e=a.create();a.normalize(e,this.offsetQuaternion);var i=a.create(),n=o(this.prevQuaternion,this.quaternion,d.PITCH_DELTA),s=o(this.prevQuaternion,this.quaternion,d.YAW_DELTA_BY_ROLL);s=Math.sin(r.extractPitchFromQuat(t))*s;var c=o(this.prevQuaternion,this.quaternion,d.YAW_DELTA_BY_YAW);isNaN(s)||isNaN(c)||(this.yaw=this.yaw+s+c),this.yaw<-180&&(this.yaw=360+this.yaw),this.yaw>180&&(this.yaw=this.yaw-360),this.pitch=this.pitch+n,a.rotateY(i,i,h.toRadian(this.yaw)),a.rotateX(i,i,h.toRadian(this.pitch)),a.copy(this.relativeQuaternion,i)}},n.prototype.updateOffsetQuaternion=function(){a.copy(this.offsetQuaternion,this.quaternion),this.update()},e.exports=n},{"../ControlMode":9,"../eg.js":18,"../utils/math-util.js":21,"./FusionPoseSensor.js":16,inherits:1}],16:[function(t,e,i){function n(){n.super_.call(this),this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.deviceMotion=new c,this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,this.onDeviceMotionChange_=this.onDeviceMotionChange_.bind(this),this.onScreenOrientationChange_=this.onScreenOrientationChange_.bind(this),this.filter=new o(f),this.posePredictor=new r(d),this.filterToWorldQ=new s.Quaternion,a.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),a.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=a.isFirefoxAndroid(),this.isIOS=a.isIOS(),this.orientationOut_=new h.ARRAY_TYPE(4),this.deviceMotion.on("devicemotion",this.onDeviceMotionChange_)}window.Float32Array="undefined"!=typeof Float32Array?Float32Array:Array;var o=t("../../node_modules/webvr-polyfill/src/sensor-fusion/complementary-filter.js"),r=t("../../node_modules/webvr-polyfill/src/sensor-fusion/pose-predictor.js"),s=t("../../node_modules/webvr-polyfill/src/math-util.js"),a=t("../../node_modules/webvr-polyfill/src/util.js"),h=(t("../utils/math-util.js").quat,t("../utils/math-util.js").glMatrix),c=t("./DeviceMotion.js"),u=t("../eg.js"),l=u.eg,p=t("inherits"),f=.98,d=.02;p(n,l.Component),n.prototype.connect=function(){this.deviceMotion.connect(),window.addEventListener("orientationchange",this.onScreenOrientationChange_)},n.prototype.disconnect=function(){this.deviceMotion.disconnect(),window.removeEventListener("orientationchange",this.onScreenOrientationChange_)},n.prototype._emitChange=function(){this.trigger("change")},n.prototype._emitConnected=function(){this.isConnected=!0,this.trigger("connected")},n.prototype.getPosition=function(){return null},n.prototype.getOrientation=function(){var t=this.filter.getOrientation(),e=this._convertFusionToPredicted(t);return this.orientationOut_[0]=e.x,this.orientationOut_[1]=e.y,this.orientationOut_[2]=e.z,this.orientationOut_[3]=e.w,this.orientationOut_},n.prototype._convertFusionToPredicted=function(t){this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var e=new s.Quaternion;return e.copy(this.filterToWorldQ),e.multiply(this.resetQ),e.multiply(this.predictedQ),e.multiply(this.worldToScreenQ),e},n.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),a.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},n.prototype.onDeviceMotionChange_=function(t){var e=t.accelerationIncludingGravity,i=t.adjustedRotationRate||t.rotationRate,n=t.timeStamp/1e3;this.isFirefoxAndroid&&(n/=1e3);var o=n-this.previousTimestampS;return o<=a.MIN_TIMESTEP||o>a.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n)):(this.accelerometer.set(-e.x,-e.y,-e.z),this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),void 0===this.previousTimestampS&&this._emitConnected(),this._emitChange(),void(this.previousTimestampS=n))},n.prototype.onScreenOrientationChange_=function(t){this.setScreenTransform_(window.orientation)},n.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-.5*Math.PI);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),.5*Math.PI);break;case 180:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-1*Math.PI)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},e.exports=n},{"../../node_modules/webvr-polyfill/src/math-util.js":3,"../../node_modules/webvr-polyfill/src/sensor-fusion/complementary-filter.js":4,"../../node_modules/webvr-polyfill/src/sensor-fusion/pose-predictor.js":5,"../../node_modules/webvr-polyfill/src/util.js":7,"../eg.js":18,"../utils/math-util.js":21,"./DeviceMotion.js":14,inherits:1}],17:[function(t,e,i){function n(t){return 1-Math.pow(1-t,3)}function o(t,e){o.super_.call(this),this.targetElement=t,this.controlMode=e.controlMode,this.allowPinchZoom=e.allowPinchZoom,this.isConnected=!1,this.yaw=e.initialYaw,this.pitch=e.initialPitch,this.fieldOfView=e.initialFieldOfView,this.initialFieldOfView=e.initialFieldOfView,this._triggerChange=this._triggerChange.bind(this),this.movableCoord=new h.MovableCoord({min:[-180,-90],max:[180,90],bounce:[0,0,0,0],circular:[!0,!0,!0,!0],easing:n,deceleration:l,maximumDuration:p}).on({change:function(t){this.yaw=t.pos[0],this.pitch=t.pos[1],this._triggerChange()}.bind(this),animationEnd:function(t){this.isPanning=!1,this.trigger("animationEnd")}.bind(this),hold:function(t){this.isPanning=!0,this.trigger("hold")}.bind(this)}),this.fieldOfViewCoord=new h.MovableCoord({min:[e.minFieldOfView|m,1],max:[e.maxFieldOfView|d,1],bounce:[0,0,0,0],circular:[!1,!1,!1,!1],easing:n,deceleration:l,maximumDuration:p}).on({change:function(t){var e=t.pos[0];this.fieldOfView=e,this.updateMovableCoordScale(),this._triggerChange()}.bind(this),animationEnd:function(t){this.trigger("animationEnd")}.bind(this)}),this.movableCoord.setTo(e.initialYaw,e.initialPitch),this.fieldOfViewCoord.setTo(e.initialFieldOfView,1)}function r(t){return t===u.YAW_PITCH||t===u.GALLERY_YAW_PITCH?h.MovableCoord.DIRECTION_ALL:t===u.VR||t===u.GALLERY?h.MovableCoord.DIRECTION_NONE:t===u.VR_YAW||t===u.YAW||t===u.GALLERY_YAW?h.MovableCoord.DIRECTION_HORIZONTAL:t===u.GALLERY_PITCH?h.MovableCoord.DIRECTION_VERTICAL:void 0}var s=(t("../utils/math-util.js").glMatrix,t("inherits")),a=t("../eg.js"),h=a.eg,c=a.Hammer||window.Hammer,u=t("../ControlMode");s(o,h.Component);var l=.0014,p=1e3,f=[.2,.2],d=110,m=20,v=320;o.prototype.setFieldOfViewRange=function(t,e){t&&this.fieldOfViewCoord.option("min",[t,1]),e&&this.fieldOfViewCoord.option("max",[e,1])},o.prototype.setPitch=function(t){var e=this.movableCoord.get();this.movableCoord.setTo(e[0],t,0)},o.prototype.connect=function(){var t=r(this.controlMode);this._originalTouchActionStyle=this.targetElement.style.touchAction;var e=parseInt(window.getComputedStyle(this.targetElement).height,10),i=f[0]*this.fieldOfView/this.initialFieldOfView*v/e;this.movableCoord.bind(this.targetElement,{direction:t,scale:[i,i]});var n=this._hammer=this.movableCoord.getHammer(this.targetElement),o=n.get("pan"),s=o.options;s.pointers=0,n.get("pan").set(s),this.allowPinchZoom&&this._bindFieldOfViewCoordHandler(this.targetElement),this.isConnected=!0,this._triggerChange()},o.prototype.disconnect=function(){this.movableCoord.unbind(this.targetElement),this.targetElement.style.touchAction=this._originalTouchActionStyle,this.allowPinchZoom&&this._unbindFieldOfViewCoordHandler(),this.isConnected=!1},o.prototype._bindFieldOfViewCoordHandler=function(t){var e=this._hammer;e.add(new c.Pinch({threshold:0})).recognizeWith([e.get("pan")]),e.on("pinchstart pinchmove pinchend",this._onPinch.bind(this))},o.prototype._onPinch=function(t){if("pinchstart"===t.type)this._pichStartFov=this.fieldOfViewCoord.get()[0];else if("pinchmove"===t.type){var e=this._pichStartFov/t.scale;e<m?e=m:e>d&&(e=d),this.fieldOfViewCoord.setTo(e,1,0)}else"pinchend"===t.type&&delete this._pichStartFov},o.prototype._unbindFieldOfViewCoordHandler=function(t){},o.prototype._triggerChange=function(){var t=void 0!==this.prevYaw?180+this.yaw-(180+this.prevYaw):0,e=void 0!==this.prevPitch?90+this.pitch-(90+this.prevPitch):0;this.trigger("change",{yaw:this.yaw,pitch:this.pitch,fieldOfView:this.fieldOfView,deltaYaw:t,deltaPitch:e}),this.prevYaw=this.yaw,this.prevPitch=this.pitch},o.prototype.setTo=function(t,e){void 0!==t.fieldOfView&&this.fieldOfViewCoord.setTo(t.fieldOfView,1,e),void 0!==t.yaw&&void 0!==t.pitch&&this.movableCoord.setTo(t.yaw,t.pitch,e)},o.prototype.setControlMode=function(t){this.controlMode=t,this.isConnected&&(this.disconnect(),this.connect())},o.prototype.updateMovableCoordScale=function(){this._setMovableCoordScale(this.fieldOfView)},o.prototype._setMovableCoordScale=function(t){var e=this.movableCoord._subOptions||this.movableCoord._status.currentOptions;if(e){var i=parseInt(window.getComputedStyle(this.targetElement).height,10),n=f[0]*t/this.initialFieldOfView*v/i;e.scale?(e.scale[0]=n,e.scale[1]=n):e.scale=[n,n]}this.movableCoord.option("deceleration",l*t/d)},o.prototype.destroy=function(){this.disconnect(),this.movableCoord.destroy(),this.fieldOfViewCoord.destroy()},e.exports=o},{"../ControlMode":9,"../eg.js":18,"../utils/math-util.js":21,inherits:1}],18:[function(t,e,i){var n="eg",o="Hammer",r=window;e.exports={global:r,eg:r[n],Hammer:r[o]}},{}],19:[function(t,e,i){function n(t){return t in o?o[t]:"UNKNOWN_ERROR"}var o={0:"NO_ERROR",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",37442:"CONTEXT_LOST_WEBGL"};e.exports=n},{}],20:[function(t,e,i){var n=t("./eg.js"),o=n.eg;o.Component&&!o.Component.prototype.once&&(o.Component.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}),o.Photo360Viewer=t("./Photo360Viewer.js"),o.ControlComposer=t("./ControlComposer.js")},{"./ControlComposer.js":8,"./Photo360Viewer.js":10,"./eg.js":18}],21:[function(t,e,i){function n(t){var e=o.fromValues(0,0,1);return o.transformQuat(e,e,t),e}var o=t("./mathUtil/vec3.js"),r=t("./mathUtil/common.js"),s=t("./mathUtil/quat.js"),a={};a.isPowerOfTwo=function(t){return"number"!=typeof t?"Not a number":t&&0===(t&t-1)},a.extractYawFromQuat=function(t){var e=n(t);return 1*Math.atan2(e[0],e[2])},a.extractPitchFromQuat=function(t){var e=n(t);return-1*Math.atan2(e[1],Math.sqrt(Math.pow(e[0],2)+Math.pow(e[2],2)))},a.getQuaternionWithYawPitch=function(t,e){var i=s.create();return s.rotateY(i,i,r.toRadian(t)),s.rotateX(i,i,r.toRadian(e)),i},a.quatToYawPitch=function(t){return{yaw:r.toDegree(a.extractYawFromQuat(t)),pitch:r.toDegree(a.extractPitchFromQuat(t))}},a.yawPitchToPoint=function(t,e){return[Math.tan(t)/Math.cos(e),Math.tan(e)]},i.util=a,i.glMatrix=t("./mathUtil/common.js"),i.mat4=t("./mathUtil/mat4.js"),i.quat=t("./mathUtil/quat.js"),i.vec3=t("./mathUtil/vec3.js")},{"./mathUtil/common.js":22,"./mathUtil/mat4.js":23,"./mathUtil/quat.js":24,"./mathUtil/vec3.js":25}],22:[function(t,e,i){var n={};n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;var o=Math.PI/180;n.toRadian=function(t){return t*o},n.toDegree=function(t){return t/o},e.exports=n},{}],23:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.rotateX=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=e[4],s=e[5],a=e[6],h=e[7],c=e[8],u=e[9],l=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+c*n,t[5]=s*o+u*n,t[6]=a*o+l*n,t[7]=h*o+p*n,t[8]=c*o-r*n,t[9]=u*o-s*n,t[10]=l*o-a*n,t[11]=p*o-h*n,t},o.rotateY=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=e[0],s=e[1],a=e[2],h=e[3],c=e[8],u=e[9],l=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-c*n,t[1]=s*o-u*n,t[2]=a*o-l*n,t[3]=h*o-p*n,t[8]=r*n+c*o,t[9]=s*n+u*o,t[10]=a*n+l*o,t[11]=h*n+p*o,t},o.fromQuat=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i+i,a=n+n,h=o+o,c=i*s,u=n*s,l=n*a,p=o*s,f=o*a,d=o*h,m=r*s,v=r*a,g=r*h;return t[0]=1-l-d,t[1]=u+g,t[2]=p-v,t[3]=0,t[4]=u-g,t[5]=1-c-d,t[6]=f+m,t[7]=0,t[8]=p+v,t[9]=f-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.perspective=function(t,e,i,n,o){var r=1/Math.tan(e/2),s=1/(n-o);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*n*s,t[15]=0,t},e.exports=o},{"./common.js":22}],24:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,i,o){var r=new n.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=o,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=i[0],h=i[1],c=i[2],u=i[3];return t[0]=n*u+s*a+o*c-r*h,t[1]=o*u+s*h+r*a-n*c,t[2]=r*u+s*c+n*h-o*a,t[3]=s*u-n*a-o*h-r*c,t},o.rotateX=function(t,e,i){i*=.5;var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=n*h+s*a,t[1]=o*h+r*a,t[2]=r*h-o*a,t[3]=s*h-n*a,t},o.rotateY=function(t,e,i){i*=.5;var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=n*h-r*a,t[1]=o*h+s*a,t[2]=r*h+n*a,t[3]=s*h-o*a,t},o.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},o.normalize=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i*i+n*n+o*o+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=i*s,t[1]=n*s,t[2]=o*s,t[3]=r*s),t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.exports=o},{"./common.js":22}],25:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.fromValues=function(t,e,i){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=i,o},o.set=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},o.length=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)},o.normalize=function(t,e){var i=e[0],n=e[1],o=e[2],r=i*i+n*n+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[0],a=i[1],h=i[2];return t[0]=o*h-r*a,t[1]=r*s-n*h,t[2]=n*a-o*s,t},o.transformQuat=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[0],a=i[1],h=i[2],c=i[3],u=c*n+a*r-h*o,l=c*o+h*n-s*r,p=c*r+s*o-a*n,f=-s*n-a*o-h*r;return t[0]=u*c+f*-s+l*-h-p*-a,t[1]=l*c+f*-a+p*-s-u*-h,t[2]=p*c+f*-h+u*-a-l*-s,t},e.exports=o},{"./common.js":22}]},{},[20]);